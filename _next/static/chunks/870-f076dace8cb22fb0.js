(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[870],{9996:function(e){"use strict";var isMergeableObject=function(e){var r;return!!e&&"object"==typeof e&&"[object RegExp]"!==(r=Object.prototype.toString.call(e))&&"[object Date]"!==r&&e.$$typeof!==t},t="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cloneUnlessOtherwiseSpecified(e,t){return!1!==t.clone&&t.isMergeableObject(e)?deepmerge(Array.isArray(e)?[]:{},e,t):e}function defaultArrayMerge(e,t,r){return e.concat(t).map(function(e){return cloneUnlessOtherwiseSpecified(e,r)})}function getKeys(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[])}function propertyIsOnObject(e,t){try{return t in e}catch(e){return!1}}function deepmerge(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||defaultArrayMerge,r.isMergeableObject=r.isMergeableObject||isMergeableObject,r.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var n,o,i=Array.isArray(t);return i!==Array.isArray(e)?cloneUnlessOtherwiseSpecified(t,r):i?r.arrayMerge(e,t,r):(o={},(n=r).isMergeableObject(e)&&getKeys(e).forEach(function(t){o[t]=cloneUnlessOtherwiseSpecified(e[t],n)}),getKeys(t).forEach(function(r){(!propertyIsOnObject(e,r)||Object.hasOwnProperty.call(e,r)&&Object.propertyIsEnumerable.call(e,r))&&(propertyIsOnObject(e,r)&&n.isMergeableObject(t[r])?o[r]=(function(e,t){if(!t.customMerge)return deepmerge;var r=t.customMerge(e);return"function"==typeof r?r:deepmerge})(r,n)(e[r],t[r],n):o[r]=cloneUnlessOtherwiseSpecified(t[r],n))}),o)}deepmerge.all=function(e,t){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,r){return deepmerge(e,r,t)},{})},e.exports=deepmerge},3454:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(7663)},7663:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(e){if(t===setTimeout)return setTimeout(e,0);if((t===defaultSetTimout||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){t=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){r=defaultClearTimeout}}();var i=[],s=!1,a=-1;function cleanUpNextTick(){s&&n&&(s=!1,n.length?i=n.concat(i):a=-1,i.length&&drainQueue())}function drainQueue(){if(!s){var e=runTimeout(cleanUpNextTick);s=!0;for(var t=i.length;t;){for(n=i,i=[];++a<t;)n&&n[a].run();a=-1,t=i.length}n=null,s=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new Item(e,t)),1!==i.length||s||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function __nccwpck_require__(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}},i=!0;try{t[e](o,o.exports,__nccwpck_require__),i=!1}finally{i&&delete r[e]}return o.exports}__nccwpck_require__.ab="//";var n=__nccwpck_require__(229);e.exports=n}()},9008:function(e,t,r){e.exports=r(9201)},6885:function(e,t,r){var n,o=r(8924).Buffer;n=function(){"use strict";var e={};function validateBase64(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!=typeof e)throw TypeError("expected string");var t,r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n},e.encodeUTF8=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0!==o.from?(e.encodeBase64=function(e){return o.from(e).toString("base64")},e.decodeBase64=function(e){return validateBase64(e),new Uint8Array(Array.prototype.slice.call(o.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new o(e).toString("base64")},e.decodeBase64=function(e){return validateBase64(e),new Uint8Array(Array.prototype.slice.call(new o(e,"base64"),0))}):(e.encodeBase64=function(e){var t,r=[],n=e.length;for(t=0;t<n;t++)r.push(String.fromCharCode(e[t]));return btoa(r.join(""))},e.decodeBase64=function(e){validateBase64(e);var t,r=atob(e),n=new Uint8Array(r.length);for(t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n}),e},e.exports?e.exports=n():(this.nacl||(this.nacl={}),this.nacl.util=n())},780:function(e,t,r){!function(e){"use strict";var t,gf=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},randombytes=function(){throw Error("no PRNG")},n=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var i=gf(),s=gf([1]),a=gf([56129,1]),c=gf([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=gf([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),u=gf([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=gf([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=gf([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ts64(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function vn(e,t,r,n,o){var i,s=0;for(i=0;i<o;i++)s|=e[t+i]^r[n+i];return(1&s-1>>>8)-1}function crypto_verify_16(e,t,r,n){return vn(e,t,r,n,16)}function crypto_verify_32(e,t,r,n){return vn(e,t,r,n,32)}function crypto_core_salsa20(e,t,r,n){!function(e,t,r,n){for(var o,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,g=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,f=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,w=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,b=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,v=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,m=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=i,E=s,C=a,T=c,R=l,k=u,x=d,O=h,U=p,P=g,N=f,j=w,I=b,W=y,L=v,D=m,q=0;q<20;q+=2)R^=(o=_+I|0)<<7|o>>>25,U^=(o=R+_|0)<<9|o>>>23,I^=(o=U+R|0)<<13|o>>>19,_^=(o=I+U|0)<<18|o>>>14,P^=(o=k+E|0)<<7|o>>>25,W^=(o=P+k|0)<<9|o>>>23,E^=(o=W+P|0)<<13|o>>>19,k^=(o=E+W|0)<<18|o>>>14,L^=(o=N+x|0)<<7|o>>>25,C^=(o=L+N|0)<<9|o>>>23,x^=(o=C+L|0)<<13|o>>>19,N^=(o=x+C|0)<<18|o>>>14,T^=(o=D+j|0)<<7|o>>>25,O^=(o=T+D|0)<<9|o>>>23,j^=(o=O+T|0)<<13|o>>>19,D^=(o=j+O|0)<<18|o>>>14,E^=(o=_+T|0)<<7|o>>>25,C^=(o=E+_|0)<<9|o>>>23,T^=(o=C+E|0)<<13|o>>>19,_^=(o=T+C|0)<<18|o>>>14,x^=(o=k+R|0)<<7|o>>>25,O^=(o=x+k|0)<<9|o>>>23,R^=(o=O+x|0)<<13|o>>>19,k^=(o=R+O|0)<<18|o>>>14,j^=(o=N+P|0)<<7|o>>>25,U^=(o=j+N|0)<<9|o>>>23,P^=(o=U+j|0)<<13|o>>>19,N^=(o=P+U|0)<<18|o>>>14,I^=(o=D+L|0)<<7|o>>>25,W^=(o=I+D|0)<<9|o>>>23,L^=(o=W+I|0)<<13|o>>>19,D^=(o=L+W|0)<<18|o>>>14;_=_+i|0,E=E+s|0,C=C+a|0,T=T+c|0,R=R+l|0,k=k+u|0,x=x+d|0,O=O+h|0,U=U+p|0,P=P+g|0,N=N+f|0,j=j+w|0,I=I+b|0,W=W+y|0,L=L+v|0,D=D+m|0,e[0]=_>>>0&255,e[1]=_>>>8&255,e[2]=_>>>16&255,e[3]=_>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=C>>>0&255,e[9]=C>>>8&255,e[10]=C>>>16&255,e[11]=C>>>24&255,e[12]=T>>>0&255,e[13]=T>>>8&255,e[14]=T>>>16&255,e[15]=T>>>24&255,e[16]=R>>>0&255,e[17]=R>>>8&255,e[18]=R>>>16&255,e[19]=R>>>24&255,e[20]=k>>>0&255,e[21]=k>>>8&255,e[22]=k>>>16&255,e[23]=k>>>24&255,e[24]=x>>>0&255,e[25]=x>>>8&255,e[26]=x>>>16&255,e[27]=x>>>24&255,e[28]=O>>>0&255,e[29]=O>>>8&255,e[30]=O>>>16&255,e[31]=O>>>24&255,e[32]=U>>>0&255,e[33]=U>>>8&255,e[34]=U>>>16&255,e[35]=U>>>24&255,e[36]=P>>>0&255,e[37]=P>>>8&255,e[38]=P>>>16&255,e[39]=P>>>24&255,e[40]=N>>>0&255,e[41]=N>>>8&255,e[42]=N>>>16&255,e[43]=N>>>24&255,e[44]=j>>>0&255,e[45]=j>>>8&255,e[46]=j>>>16&255,e[47]=j>>>24&255,e[48]=I>>>0&255,e[49]=I>>>8&255,e[50]=I>>>16&255,e[51]=I>>>24&255,e[52]=W>>>0&255,e[53]=W>>>8&255,e[54]=W>>>16&255,e[55]=W>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=D>>>0&255,e[61]=D>>>8&255,e[62]=D>>>16&255,e[63]=D>>>24&255}(e,t,r,n)}function crypto_core_hsalsa20(e,t,r,n){!function(e,t,r,n){for(var o,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,l=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,p=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,g=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,f=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,w=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,b=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,y=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,v=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,m=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=i,E=s,C=a,T=c,R=l,k=u,x=d,O=h,U=p,P=g,N=f,j=w,I=b,W=y,L=v,D=m,q=0;q<20;q+=2)R^=(o=_+I|0)<<7|o>>>25,U^=(o=R+_|0)<<9|o>>>23,I^=(o=U+R|0)<<13|o>>>19,_^=(o=I+U|0)<<18|o>>>14,P^=(o=k+E|0)<<7|o>>>25,W^=(o=P+k|0)<<9|o>>>23,E^=(o=W+P|0)<<13|o>>>19,k^=(o=E+W|0)<<18|o>>>14,L^=(o=N+x|0)<<7|o>>>25,C^=(o=L+N|0)<<9|o>>>23,x^=(o=C+L|0)<<13|o>>>19,N^=(o=x+C|0)<<18|o>>>14,T^=(o=D+j|0)<<7|o>>>25,O^=(o=T+D|0)<<9|o>>>23,j^=(o=O+T|0)<<13|o>>>19,D^=(o=j+O|0)<<18|o>>>14,E^=(o=_+T|0)<<7|o>>>25,C^=(o=E+_|0)<<9|o>>>23,T^=(o=C+E|0)<<13|o>>>19,_^=(o=T+C|0)<<18|o>>>14,x^=(o=k+R|0)<<7|o>>>25,O^=(o=x+k|0)<<9|o>>>23,R^=(o=O+x|0)<<13|o>>>19,k^=(o=R+O|0)<<18|o>>>14,j^=(o=N+P|0)<<7|o>>>25,U^=(o=j+N|0)<<9|o>>>23,P^=(o=U+j|0)<<13|o>>>19,N^=(o=P+U|0)<<18|o>>>14,I^=(o=D+L|0)<<7|o>>>25,W^=(o=I+D|0)<<9|o>>>23,L^=(o=W+I|0)<<13|o>>>19,D^=(o=L+W|0)<<18|o>>>14;e[0]=_>>>0&255,e[1]=_>>>8&255,e[2]=_>>>16&255,e[3]=_>>>24&255,e[4]=k>>>0&255,e[5]=k>>>8&255,e[6]=k>>>16&255,e[7]=k>>>24&255,e[8]=N>>>0&255,e[9]=N>>>8&255,e[10]=N>>>16&255,e[11]=N>>>24&255,e[12]=D>>>0&255,e[13]=D>>>8&255,e[14]=D>>>16&255,e[15]=D>>>24&255,e[16]=x>>>0&255,e[17]=x>>>8&255,e[18]=x>>>16&255,e[19]=x>>>24&255,e[20]=O>>>0&255,e[21]=O>>>8&255,e[22]=O>>>16&255,e[23]=O>>>24&255,e[24]=U>>>0&255,e[25]=U>>>8&255,e[26]=U>>>16&255,e[27]=U>>>24&255,e[28]=P>>>0&255,e[29]=P>>>8&255,e[30]=P>>>16&255,e[31]=P>>>24&255}(e,t,r,n)}var p=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function crypto_stream_salsa20_xor(e,t,r,n,o,i,s){var a,c,l=new Uint8Array(16),u=new Uint8Array(64);for(c=0;c<16;c++)l[c]=0;for(c=0;c<8;c++)l[c]=i[c];for(;o>=64;){for(crypto_core_salsa20(u,l,s,p),c=0;c<64;c++)e[t+c]=r[n+c]^u[c];for(c=8,a=1;c<16;c++)a=a+(255&l[c])|0,l[c]=255&a,a>>>=8;o-=64,t+=64,n+=64}if(o>0)for(crypto_core_salsa20(u,l,s,p),c=0;c<o;c++)e[t+c]=r[n+c]^u[c];return 0}function crypto_stream_salsa20(e,t,r,n,o){var i,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(crypto_core_salsa20(c,a,o,p),s=0;s<64;s++)e[t+s]=c[s];for(s=8,i=1;s<16;s++)i=i+(255&a[s])|0,a[s]=255&i,i>>>=8;r-=64,t+=64}if(r>0)for(crypto_core_salsa20(c,a,o,p),s=0;s<r;s++)e[t+s]=c[s];return 0}function crypto_stream(e,t,r,n,o){var i=new Uint8Array(32);crypto_core_hsalsa20(i,n,o,p);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return crypto_stream_salsa20(e,t,r,s,i)}function crypto_stream_xor(e,t,r,n,o,i,s){var a=new Uint8Array(32);crypto_core_hsalsa20(a,i,s,p);for(var c=new Uint8Array(8),l=0;l<8;l++)c[l]=i[l+16];return crypto_stream_salsa20_xor(e,t,r,n,o,c,a)}var poly1305=function(e){var t,r,n,o,i,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=(t>>>13|r<<3)&8191,n=255&e[4]|(255&e[5])<<8,this.r[2]=(r>>>10|n<<6)&7939,o=255&e[6]|(255&e[7])<<8,this.r[3]=(n>>>7|o<<9)&8191,i=255&e[8]|(255&e[9])<<8,this.r[4]=(o>>>4|i<<12)&255,this.r[5]=i>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=(i>>>14|s<<2)&8191,a=255&e[12]|(255&e[13])<<8,this.r[7]=(s>>>11|a<<5)&8065,c=255&e[14]|(255&e[15])<<8,this.r[8]=(a>>>8|c<<8)&8191,this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function crypto_onetimeauth(e,t,r,n,o,i){var s=new poly1305(i);return s.update(r,n,o),s.finish(e,t),0}function crypto_onetimeauth_verify(e,t,r,n,o,i){var s=new Uint8Array(16);return crypto_onetimeauth(s,0,r,n,o,i),crypto_verify_16(e,t,s,0)}function crypto_secretbox(e,t,r,n,o){var i;if(r<32)return -1;for(crypto_stream_xor(e,0,t,0,r,n,o),crypto_onetimeauth(e,16,e,32,r-32,e),i=0;i<16;i++)e[i]=0;return 0}function crypto_secretbox_open(e,t,r,n,o){var i,s=new Uint8Array(32);if(r<32||(crypto_stream(s,0,32,n,o),0!==crypto_onetimeauth_verify(t,16,t,32,r-32,s)))return -1;for(crypto_stream_xor(e,0,t,0,r,n,o),i=0;i<32;i++)e[i]=0;return 0}function set25519(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function car25519(e){var t,r,n=1;for(t=0;t<16;t++)n=Math.floor((r=e[t]+n+65535)/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function sel25519(e,t,r){for(var n,o=~(r-1),i=0;i<16;i++)n=o&(e[i]^t[i]),e[i]^=n,t[i]^=n}function pack25519(e,t){var r,n,o,i=gf(),s=gf();for(r=0;r<16;r++)s[r]=t[r];for(car25519(s),car25519(s),car25519(s),n=0;n<2;n++){for(r=1,i[0]=s[0]-65517;r<15;r++)i[r]=s[r]-65535-(i[r-1]>>16&1),i[r-1]&=65535;i[15]=s[15]-32767-(i[14]>>16&1),o=i[15]>>16&1,i[14]&=65535,sel25519(s,i,1-o)}for(r=0;r<16;r++)e[2*r]=255&s[r],e[2*r+1]=s[r]>>8}function neq25519(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return pack25519(r,e),pack25519(n,t),crypto_verify_32(r,0,n,0)}function par25519(e){var t=new Uint8Array(32);return pack25519(t,e),1&t[0]}function unpack25519(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function A(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function Z(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function M(e,t,r){var n,o,i=0,s=0,a=0,c=0,l=0,u=0,d=0,h=0,p=0,g=0,f=0,w=0,b=0,y=0,v=0,m=0,_=0,E=0,C=0,T=0,R=0,k=0,x=0,O=0,U=0,P=0,N=0,j=0,I=0,W=0,L=0,D=r[0],q=r[1],B=r[2],K=r[3],F=r[4],G=r[5],H=r[6],z=r[7],$=r[8],V=r[9],Y=r[10],J=r[11],Q=r[12],X=r[13],ee=r[14],et=r[15];i+=(n=t[0])*D,s+=n*q,a+=n*B,c+=n*K,l+=n*F,u+=n*G,d+=n*H,h+=n*z,p+=n*$,g+=n*V,f+=n*Y,w+=n*J,b+=n*Q,y+=n*X,v+=n*ee,m+=n*et,s+=(n=t[1])*D,a+=n*q,c+=n*B,l+=n*K,u+=n*F,d+=n*G,h+=n*H,p+=n*z,g+=n*$,f+=n*V,w+=n*Y,b+=n*J,y+=n*Q,v+=n*X,m+=n*ee,_+=n*et,a+=(n=t[2])*D,c+=n*q,l+=n*B,u+=n*K,d+=n*F,h+=n*G,p+=n*H,g+=n*z,f+=n*$,w+=n*V,b+=n*Y,y+=n*J,v+=n*Q,m+=n*X,_+=n*ee,E+=n*et,c+=(n=t[3])*D,l+=n*q,u+=n*B,d+=n*K,h+=n*F,p+=n*G,g+=n*H,f+=n*z,w+=n*$,b+=n*V,y+=n*Y,v+=n*J,m+=n*Q,_+=n*X,E+=n*ee,C+=n*et,l+=(n=t[4])*D,u+=n*q,d+=n*B,h+=n*K,p+=n*F,g+=n*G,f+=n*H,w+=n*z,b+=n*$,y+=n*V,v+=n*Y,m+=n*J,_+=n*Q,E+=n*X,C+=n*ee,T+=n*et,u+=(n=t[5])*D,d+=n*q,h+=n*B,p+=n*K,g+=n*F,f+=n*G,w+=n*H,b+=n*z,y+=n*$,v+=n*V,m+=n*Y,_+=n*J,E+=n*Q,C+=n*X,T+=n*ee,R+=n*et,d+=(n=t[6])*D,h+=n*q,p+=n*B,g+=n*K,f+=n*F,w+=n*G,b+=n*H,y+=n*z,v+=n*$,m+=n*V,_+=n*Y,E+=n*J,C+=n*Q,T+=n*X,R+=n*ee,k+=n*et,h+=(n=t[7])*D,p+=n*q,g+=n*B,f+=n*K,w+=n*F,b+=n*G,y+=n*H,v+=n*z,m+=n*$,_+=n*V,E+=n*Y,C+=n*J,T+=n*Q,R+=n*X,k+=n*ee,x+=n*et,p+=(n=t[8])*D,g+=n*q,f+=n*B,w+=n*K,b+=n*F,y+=n*G,v+=n*H,m+=n*z,_+=n*$,E+=n*V,C+=n*Y,T+=n*J,R+=n*Q,k+=n*X,x+=n*ee,O+=n*et,g+=(n=t[9])*D,f+=n*q,w+=n*B,b+=n*K,y+=n*F,v+=n*G,m+=n*H,_+=n*z,E+=n*$,C+=n*V,T+=n*Y,R+=n*J,k+=n*Q,x+=n*X,O+=n*ee,U+=n*et,f+=(n=t[10])*D,w+=n*q,b+=n*B,y+=n*K,v+=n*F,m+=n*G,_+=n*H,E+=n*z,C+=n*$,T+=n*V,R+=n*Y,k+=n*J,x+=n*Q,O+=n*X,U+=n*ee,P+=n*et,w+=(n=t[11])*D,b+=n*q,y+=n*B,v+=n*K,m+=n*F,_+=n*G,E+=n*H,C+=n*z,T+=n*$,R+=n*V,k+=n*Y,x+=n*J,O+=n*Q,U+=n*X,P+=n*ee,N+=n*et,b+=(n=t[12])*D,y+=n*q,v+=n*B,m+=n*K,_+=n*F,E+=n*G,C+=n*H,T+=n*z,R+=n*$,k+=n*V,x+=n*Y,O+=n*J,U+=n*Q,P+=n*X,N+=n*ee,j+=n*et,y+=(n=t[13])*D,v+=n*q,m+=n*B,_+=n*K,E+=n*F,C+=n*G,T+=n*H,R+=n*z,k+=n*$,x+=n*V,O+=n*Y,U+=n*J,P+=n*Q,N+=n*X,j+=n*ee,I+=n*et,v+=(n=t[14])*D,m+=n*q,_+=n*B,E+=n*K,C+=n*F,T+=n*G,R+=n*H,k+=n*z,x+=n*$,O+=n*V,U+=n*Y,P+=n*J,N+=n*Q,j+=n*X,I+=n*ee,W+=n*et,m+=(n=t[15])*D,_+=n*q,E+=n*B,C+=n*K,T+=n*F,R+=n*G,k+=n*H,x+=n*z,O+=n*$,U+=n*V,P+=n*Y,N+=n*J,j+=n*Q,I+=n*X,W+=n*ee,L+=n*et,i+=38*_,s+=38*E,a+=38*C,c+=38*T,l+=38*R,u+=38*k,d+=38*x,h+=38*O,p+=38*U,g+=38*P,f+=38*N,w+=38*j,b+=38*I,y+=38*W,v+=38*L,o=Math.floor((n=i+(o=1)+65535)/65536),i=n-65536*o,o=Math.floor((n=s+o+65535)/65536),s=n-65536*o,o=Math.floor((n=a+o+65535)/65536),a=n-65536*o,o=Math.floor((n=c+o+65535)/65536),c=n-65536*o,o=Math.floor((n=l+o+65535)/65536),l=n-65536*o,o=Math.floor((n=u+o+65535)/65536),u=n-65536*o,o=Math.floor((n=d+o+65535)/65536),d=n-65536*o,o=Math.floor((n=h+o+65535)/65536),h=n-65536*o,o=Math.floor((n=p+o+65535)/65536),p=n-65536*o,o=Math.floor((n=g+o+65535)/65536),g=n-65536*o,o=Math.floor((n=f+o+65535)/65536),f=n-65536*o,o=Math.floor((n=w+o+65535)/65536),w=n-65536*o,o=Math.floor((n=b+o+65535)/65536),b=n-65536*o,o=Math.floor((n=y+o+65535)/65536),y=n-65536*o,o=Math.floor((n=v+o+65535)/65536),v=n-65536*o,o=Math.floor((n=m+o+65535)/65536),m=n-65536*o,i+=o-1+37*(o-1),o=Math.floor((n=i+(o=1)+65535)/65536),i=n-65536*o,o=Math.floor((n=s+o+65535)/65536),s=n-65536*o,o=Math.floor((n=a+o+65535)/65536),a=n-65536*o,o=Math.floor((n=c+o+65535)/65536),c=n-65536*o,o=Math.floor((n=l+o+65535)/65536),l=n-65536*o,o=Math.floor((n=u+o+65535)/65536),u=n-65536*o,o=Math.floor((n=d+o+65535)/65536),d=n-65536*o,o=Math.floor((n=h+o+65535)/65536),h=n-65536*o,o=Math.floor((n=p+o+65535)/65536),p=n-65536*o,o=Math.floor((n=g+o+65535)/65536),g=n-65536*o,o=Math.floor((n=f+o+65535)/65536),f=n-65536*o,o=Math.floor((n=w+o+65535)/65536),w=n-65536*o,o=Math.floor((n=b+o+65535)/65536),b=n-65536*o,o=Math.floor((n=y+o+65535)/65536),y=n-65536*o,o=Math.floor((n=v+o+65535)/65536),v=n-65536*o,o=Math.floor((n=m+o+65535)/65536),m=n-65536*o,i+=o-1+37*(o-1),e[0]=i,e[1]=s,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=d,e[7]=h,e[8]=p,e[9]=g,e[10]=f,e[11]=w,e[12]=b,e[13]=y,e[14]=v,e[15]=m}function S(e,t){M(e,t,t)}function inv25519(e,t){var r,n=gf();for(r=0;r<16;r++)n[r]=t[r];for(r=253;r>=0;r--)S(n,n),2!==r&&4!==r&&M(n,n,t);for(r=0;r<16;r++)e[r]=n[r]}function pow2523(e,t){var r,n=gf();for(r=0;r<16;r++)n[r]=t[r];for(r=250;r>=0;r--)S(n,n),1!==r&&M(n,n,t);for(r=0;r<16;r++)e[r]=n[r]}function crypto_scalarmult(e,t,r){var n,o,i=new Uint8Array(32),s=new Float64Array(80),c=gf(),l=gf(),u=gf(),d=gf(),h=gf(),p=gf();for(o=0;o<31;o++)i[o]=t[o];for(i[31]=127&t[31]|64,i[0]&=248,unpack25519(s,r),o=0;o<16;o++)l[o]=s[o],d[o]=c[o]=u[o]=0;for(o=254,c[0]=d[0]=1;o>=0;--o)sel25519(c,l,n=i[o>>>3]>>>(7&o)&1),sel25519(u,d,n),A(h,c,u),Z(c,c,u),A(u,l,d),Z(l,l,d),S(d,h),S(p,c),M(c,u,c),M(u,l,h),A(h,c,u),Z(c,c,u),S(l,c),Z(u,d,p),M(c,u,a),A(c,c,d),M(u,u,c),M(c,d,p),M(d,l,s),S(l,h),sel25519(c,l,n),sel25519(u,d,n);for(o=0;o<16;o++)s[o+16]=c[o],s[o+32]=u[o],s[o+48]=l[o],s[o+64]=d[o];var g=s.subarray(32),f=s.subarray(16);return inv25519(g,g),M(f,f,g),pack25519(e,f),0}function crypto_scalarmult_base(e,t){return crypto_scalarmult(e,t,o)}function crypto_box_keypair(e,t){return randombytes(t,32),crypto_scalarmult_base(e,t)}function crypto_box_beforenm(e,t,r){var o=new Uint8Array(32);return crypto_scalarmult(o,r,t),crypto_core_hsalsa20(e,n,o,p)}poly1305.prototype.blocks=function(e,t,r){for(var n,o,i,s,a,c,l,u,d,h,p,g,f,w,b,y,v,m,_,E=this.fin?0:2048,C=this.h[0],T=this.h[1],R=this.h[2],k=this.h[3],x=this.h[4],O=this.h[5],U=this.h[6],P=this.h[7],N=this.h[8],j=this.h[9],I=this.r[0],W=this.r[1],L=this.r[2],D=this.r[3],q=this.r[4],B=this.r[5],K=this.r[6],F=this.r[7],G=this.r[8],H=this.r[9];r>=16;)C+=8191&(n=255&e[t+0]|(255&e[t+1])<<8),T+=(n>>>13|(o=255&e[t+2]|(255&e[t+3])<<8)<<3)&8191,R+=(o>>>10|(i=255&e[t+4]|(255&e[t+5])<<8)<<6)&8191,k+=(i>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9)&8191,x+=(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12)&8191,O+=a>>>1&8191,U+=(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2)&8191,P+=(c>>>11|(l=255&e[t+12]|(255&e[t+13])<<8)<<5)&8191,N+=(l>>>8|(u=255&e[t+14]|(255&e[t+15])<<8)<<8)&8191,j+=u>>>5|E,d=(h=(d=0)+C*I+T*(5*H)+R*(5*G)+k*(5*F)+x*(5*K))>>>13,h&=8191,h+=O*(5*B)+U*(5*q)+P*(5*D)+N*(5*L)+j*(5*W),d+=h>>>13,h&=8191,d=(p=d+C*W+T*I+R*(5*H)+k*(5*G)+x*(5*F))>>>13,p&=8191,p+=O*(5*K)+U*(5*B)+P*(5*q)+N*(5*D)+j*(5*L),d+=p>>>13,p&=8191,d=(g=d+C*L+T*W+R*I+k*(5*H)+x*(5*G))>>>13,g&=8191,g+=O*(5*F)+U*(5*K)+P*(5*B)+N*(5*q)+j*(5*D),d+=g>>>13,g&=8191,d=(f=d+C*D+T*L+R*W+k*I+x*(5*H))>>>13,f&=8191,f+=O*(5*G)+U*(5*F)+P*(5*K)+N*(5*B)+j*(5*q),d+=f>>>13,f&=8191,d=(w=d+C*q+T*D+R*L+k*W+x*I)>>>13,w&=8191,w+=O*(5*H)+U*(5*G)+P*(5*F)+N*(5*K)+j*(5*B),d+=w>>>13,w&=8191,d=(b=d+C*B+T*q+R*D+k*L+x*W)>>>13,b&=8191,b+=O*I+U*(5*H)+P*(5*G)+N*(5*F)+j*(5*K),d+=b>>>13,b&=8191,d=(y=d+C*K+T*B+R*q+k*D+x*L)>>>13,y&=8191,y+=O*W+U*I+P*(5*H)+N*(5*G)+j*(5*F),d+=y>>>13,y&=8191,d=(v=d+C*F+T*K+R*B+k*q+x*D)>>>13,v&=8191,v+=O*L+U*W+P*I+N*(5*H)+j*(5*G),d+=v>>>13,v&=8191,d=(m=d+C*G+T*F+R*K+k*B+x*q)>>>13,m&=8191,m+=O*D+U*L+P*W+N*I+j*(5*H),d+=m>>>13,m&=8191,d=(_=d+C*H+T*G+R*F+k*K+x*B)>>>13,_&=8191,_+=O*q+U*D+P*L+N*W+j*I,d+=_>>>13,_&=8191,h=8191&(d=(d=(d<<2)+d|0)+h|0),d>>>=13,p+=d,C=h,T=p,R=g,k=f,x=w,O=b,U=y,P=v,N=m,j=_,t+=16,r-=16;this.h[0]=C,this.h[1]=T,this.h[2]=R,this.h[3]=k,this.h[4]=x,this.h[5]=O,this.h[6]=U,this.h[7]=P,this.h[8]=N,this.h[9]=j},poly1305.prototype.finish=function(e,t){var r,n,o,i,s=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,i=1;i<10;i++)s[i]=this.h[i]+r,r=s[i]>>>13,s[i]&=8191;for(s[9]-=8192,n=(1^r)-1,i=0;i<10;i++)s[i]&=n;for(i=0,n=~n;i<10;i++)this.h[i]=this.h[i]&n|s[i];for(i=1,this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,o=this.h[0]+this.pad[0],this.h[0]=65535&o;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},poly1305.prototype.update=function(e,t,r){var n,o;if(this.leftover){for((o=16-this.leftover)>r&&(o=r),n=0;n<o;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=o,t+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(o=r-r%16,this.blocks(e,t,o),t+=o,r-=o),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function crypto_hashblocks_hl(e,t,r,n){for(var o,i,s,a,c,l,u,d,h,p,f,w,b,y,v,m,_,E,C,T,R,k,x,O,U,P,N=new Int32Array(16),j=new Int32Array(16),I=e[0],W=e[1],L=e[2],D=e[3],q=e[4],B=e[5],K=e[6],F=e[7],G=t[0],H=t[1],z=t[2],$=t[3],V=t[4],Y=t[5],J=t[6],Q=t[7],X=0;n>=128;){for(C=0;C<16;C++)T=8*C+X,N[C]=r[T+0]<<24|r[T+1]<<16|r[T+2]<<8|r[T+3],j[C]=r[T+4]<<24|r[T+5]<<16|r[T+6]<<8|r[T+7];for(C=0;C<80;C++)if(o=I,i=W,s=L,a=D,c=q,l=B,u=K,d=F,h=G,p=H,f=z,w=$,b=V,y=Y,v=J,m=Q,R=F,x=65535&(k=Q),O=k>>>16,U=65535&R,P=R>>>16,R=(q>>>14|V<<18)^(q>>>18|V<<14)^(V>>>9|q<<23),x+=65535&(k=(V>>>14|q<<18)^(V>>>18|q<<14)^(q>>>9|V<<23)),O+=k>>>16,U+=65535&R,P+=R>>>16,R=q&B^~q&K,x+=65535&(k=V&Y^~V&J),O+=k>>>16,U+=65535&R,P+=R>>>16,R=g[2*C],x+=65535&(k=g[2*C+1]),O+=k>>>16,U+=65535&R,P+=R>>>16,R=N[C%16],x+=65535&(k=j[C%16]),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,_=65535&U|P<<16,E=65535&x|O<<16,R=_,x=65535&(k=E),O=k>>>16,U=65535&R,P=R>>>16,R=(I>>>28|G<<4)^(G>>>2|I<<30)^(G>>>7|I<<25),x+=65535&(k=(G>>>28|I<<4)^(I>>>2|G<<30)^(I>>>7|G<<25)),O+=k>>>16,U+=65535&R,P+=R>>>16,R=I&W^I&L^W&L,x+=65535&(k=G&H^G&z^H&z),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,d=65535&U|P<<16,m=65535&x|O<<16,R=a,x=65535&(k=w),O=k>>>16,U=65535&R,P=R>>>16,R=_,x+=65535&(k=E),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,a=65535&U|P<<16,w=65535&x|O<<16,W=o,L=i,D=s,q=a,B=c,K=l,F=u,I=d,H=h,z=p,$=f,V=w,Y=b,J=y,Q=v,G=m,C%16==15)for(T=0;T<16;T++)R=N[T],x=65535&(k=j[T]),O=k>>>16,U=65535&R,P=R>>>16,R=N[(T+9)%16],x+=65535&(k=j[(T+9)%16]),O+=k>>>16,U+=65535&R,P+=R>>>16,R=((_=N[(T+1)%16])>>>1|(E=j[(T+1)%16])<<31)^(_>>>8|E<<24)^_>>>7,x+=65535&(k=(E>>>1|_<<31)^(E>>>8|_<<24)^(E>>>7|_<<25)),O+=k>>>16,U+=65535&R,P+=R>>>16,R=((_=N[(T+14)%16])>>>19|(E=j[(T+14)%16])<<13)^(E>>>29|_<<3)^_>>>6,x+=65535&(k=(E>>>19|_<<13)^(_>>>29|E<<3)^(E>>>6|_<<26)),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,N[T]=65535&U|P<<16,j[T]=65535&x|O<<16;R=I,x=65535&(k=G),O=k>>>16,U=65535&R,P=R>>>16,R=e[0],x+=65535&(k=t[0]),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,e[0]=I=65535&U|P<<16,t[0]=G=65535&x|O<<16,R=W,x=65535&(k=H),O=k>>>16,U=65535&R,P=R>>>16,R=e[1],x+=65535&(k=t[1]),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,e[1]=W=65535&U|P<<16,t[1]=H=65535&x|O<<16,R=L,x=65535&(k=z),O=k>>>16,U=65535&R,P=R>>>16,R=e[2],x+=65535&(k=t[2]),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,e[2]=L=65535&U|P<<16,t[2]=z=65535&x|O<<16,R=D,x=65535&(k=$),O=k>>>16,U=65535&R,P=R>>>16,R=e[3],x+=65535&(k=t[3]),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,e[3]=D=65535&U|P<<16,t[3]=$=65535&x|O<<16,R=q,x=65535&(k=V),O=k>>>16,U=65535&R,P=R>>>16,R=e[4],x+=65535&(k=t[4]),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,e[4]=q=65535&U|P<<16,t[4]=V=65535&x|O<<16,R=B,x=65535&(k=Y),O=k>>>16,U=65535&R,P=R>>>16,R=e[5],x+=65535&(k=t[5]),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,e[5]=B=65535&U|P<<16,t[5]=Y=65535&x|O<<16,R=K,x=65535&(k=J),O=k>>>16,U=65535&R,P=R>>>16,R=e[6],x+=65535&(k=t[6]),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,e[6]=K=65535&U|P<<16,t[6]=J=65535&x|O<<16,R=F,x=65535&(k=Q),O=k>>>16,U=65535&R,P=R>>>16,R=e[7],x+=65535&(k=t[7]),O+=k>>>16,U+=65535&R,P+=R>>>16,O+=x>>>16,U+=O>>>16,P+=U>>>16,e[7]=F=65535&U|P<<16,t[7]=Q=65535&x|O<<16,X+=128,n-=128}return n}function crypto_hash(e,t,r){var n,o=new Int32Array(8),i=new Int32Array(8),s=new Uint8Array(256),a=r;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,crypto_hashblocks_hl(o,i,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,ts64(s,r-8,a/536870912|0,a<<3),crypto_hashblocks_hl(o,i,s,r),n=0;n<8;n++)ts64(e,8*n,o[n],i[n]);return 0}function add(e,t){var r=gf(),n=gf(),o=gf(),i=gf(),s=gf(),a=gf(),c=gf(),u=gf(),d=gf();Z(r,e[1],e[0]),Z(d,t[1],t[0]),M(r,r,d),A(n,e[0],e[1]),A(d,t[0],t[1]),M(n,n,d),M(o,e[3],t[3]),M(o,o,l),M(i,e[2],t[2]),A(i,i,i),Z(s,n,r),Z(a,i,o),A(c,i,o),A(u,n,r),M(e[0],s,a),M(e[1],u,c),M(e[2],c,a),M(e[3],s,u)}function cswap(e,t,r){var n;for(n=0;n<4;n++)sel25519(e[n],t[n],r)}function pack(e,t){var r=gf(),n=gf(),o=gf();inv25519(o,t[2]),M(r,t[0],o),M(n,t[1],o),pack25519(e,n),e[31]^=par25519(r)<<7}function scalarmult(e,t,r){var n,o;for(set25519(e[0],i),set25519(e[1],s),set25519(e[2],s),set25519(e[3],i),o=255;o>=0;--o)cswap(e,t,n=r[o/8|0]>>(7&o)&1),add(t,e),add(e,e),cswap(e,t,n)}function scalarbase(e,t){var r=[gf(),gf(),gf(),gf()];set25519(r[0],u),set25519(r[1],d),set25519(r[2],s),M(r[3],u,d),scalarmult(e,r,t)}function crypto_sign_keypair(e,t,r){var n,o=new Uint8Array(64),i=[gf(),gf(),gf(),gf()];for(r||randombytes(t,32),crypto_hash(o,t,32),o[0]&=248,o[31]&=127,o[31]|=64,scalarbase(i,o),pack(e,i),n=0;n<32;n++)t[n+32]=e[n];return 0}var f=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function modL(e,t){var r,n,o,i;for(n=63;n>=32;--n){for(r=0,o=n-32,i=n-12;o<i;++o)t[o]+=r-16*t[n]*f[o-(n-32)],r=Math.floor((t[o]+128)/256),t[o]-=256*r;t[o]+=r,t[n]=0}for(o=0,r=0;o<32;o++)t[o]+=r-(t[31]>>4)*f[o],r=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=r*f[o];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function reduce(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;modL(e,r)}function crypto_sign(e,t,r,n){var o,i,s=new Uint8Array(64),a=new Uint8Array(64),c=new Uint8Array(64),l=new Float64Array(64),u=[gf(),gf(),gf(),gf()];crypto_hash(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64;var d=r+64;for(o=0;o<r;o++)e[64+o]=t[o];for(o=0;o<32;o++)e[32+o]=s[32+o];for(crypto_hash(c,e.subarray(32),r+32),reduce(c),scalarbase(u,c),pack(e,u),o=32;o<64;o++)e[o]=n[o];for(crypto_hash(a,e,r+64),reduce(a),o=0;o<64;o++)l[o]=0;for(o=0;o<32;o++)l[o]=c[o];for(o=0;o<32;o++)for(i=0;i<32;i++)l[o+i]+=a[o]*s[i];return modL(e.subarray(32),l),d}function crypto_sign_open(e,t,r,n){var o,a,l,u,d,p,g,f,w=new Uint8Array(32),b=new Uint8Array(64),y=[gf(),gf(),gf(),gf()],v=[gf(),gf(),gf(),gf()];if(r<64||(o=gf(),a=gf(),l=gf(),u=gf(),d=gf(),p=gf(),g=gf(),(set25519(v[2],s),unpack25519(v[1],n),S(l,v[1]),M(u,l,c),Z(l,l,v[2]),A(u,v[2],u),S(d,u),S(p,d),M(g,p,d),M(o,g,l),M(o,o,u),pow2523(o,o),M(o,o,l),M(o,o,u),M(o,o,u),M(v[0],o,u),S(a,v[0]),M(a,a,u),neq25519(a,l)&&M(v[0],v[0],h),S(a,v[0]),M(a,a,u),neq25519(a,l))?-1:(par25519(v[0])===n[31]>>7&&Z(v[0],i,v[0]),M(v[3],v[0],v[1]),0)))return -1;for(f=0;f<r;f++)e[f]=t[f];for(f=0;f<32;f++)e[f+32]=n[f];if(crypto_hash(b,e,r),reduce(b),scalarmult(y,v,b),scalarbase(v,t.subarray(32)),add(y,v),pack(w,y),r-=64,crypto_verify_32(t,0,w,0)){for(f=0;f<r;f++)e[f]=0;return -1}for(f=0;f<r;f++)e[f]=t[f+64];return r}function checkLengths(e,t){if(32!==e.length)throw Error("bad key size");if(24!==t.length)throw Error("bad nonce size")}function checkArrayTypes(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw TypeError("unexpected type, use Uint8Array")}function cleanup(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:crypto_core_hsalsa20,crypto_stream_xor:crypto_stream_xor,crypto_stream:crypto_stream,crypto_stream_salsa20_xor:crypto_stream_salsa20_xor,crypto_stream_salsa20:crypto_stream_salsa20,crypto_onetimeauth:crypto_onetimeauth,crypto_onetimeauth_verify:crypto_onetimeauth_verify,crypto_verify_16:crypto_verify_16,crypto_verify_32:crypto_verify_32,crypto_secretbox:crypto_secretbox,crypto_secretbox_open:crypto_secretbox_open,crypto_scalarmult:crypto_scalarmult,crypto_scalarmult_base:crypto_scalarmult_base,crypto_box_beforenm:crypto_box_beforenm,crypto_box_afternm:crypto_secretbox,crypto_box:function(e,t,r,n,o,i){var s=new Uint8Array(32);return crypto_box_beforenm(s,o,i),crypto_secretbox(e,t,r,n,s)},crypto_box_open:function(e,t,r,n,o,i){var s=new Uint8Array(32);return crypto_box_beforenm(s,o,i),crypto_secretbox_open(e,t,r,n,s)},crypto_box_keypair:crypto_box_keypair,crypto_hash:crypto_hash,crypto_sign:crypto_sign,crypto_sign_keypair:crypto_sign_keypair,crypto_sign_open:crypto_sign_open,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:gf,D:c,L:f,pack25519:pack25519,unpack25519:unpack25519,M:M,A:A,S:S,Z:Z,pow2523:pow2523,add:add,set25519:set25519,modL:modL,scalarmult:scalarmult,scalarbase:scalarbase},e.randomBytes=function(e){var t=new Uint8Array(e);return randombytes(t,e),t},e.secretbox=function(e,t,r){checkArrayTypes(e,t,r),checkLengths(r,t);for(var n=new Uint8Array(32+e.length),o=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+32]=e[i];return crypto_secretbox(o,n,n.length,t,r),o.subarray(16)},e.secretbox.open=function(e,t,r){checkArrayTypes(e,t,r),checkLengths(r,t);for(var n=new Uint8Array(16+e.length),o=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+16]=e[i];return n.length<32||0!==crypto_secretbox_open(o,n,n.length,t,r)?null:o.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=16,e.scalarMult=function(e,t){if(checkArrayTypes(e,t),32!==e.length)throw Error("bad n size");if(32!==t.length)throw Error("bad p size");var r=new Uint8Array(32);return crypto_scalarmult(r,e,t),r},e.scalarMult.base=function(e){if(checkArrayTypes(e),32!==e.length)throw Error("bad n size");var t=new Uint8Array(32);return crypto_scalarmult_base(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,o){var i=e.box.before(n,o);return e.secretbox(t,r,i)},e.box.before=function(e,t){checkArrayTypes(e,t),function(e,t){if(32!==e.length)throw Error("bad public key size");if(32!==t.length)throw Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return crypto_box_beforenm(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,o){var i=e.box.before(n,o);return e.secretbox.open(t,r,i)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return crypto_box_keypair(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(checkArrayTypes(e),32!==e.length)throw Error("bad secret key size");var t=new Uint8Array(32);return crypto_scalarmult_base(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(checkArrayTypes(e,t),64!==t.length)throw Error("bad secret key size");var r=new Uint8Array(64+e.length);return crypto_sign(r,e,e.length,t),r},e.sign.open=function(e,t){if(checkArrayTypes(e,t),32!==t.length)throw Error("bad public key size");var r=new Uint8Array(e.length),n=crypto_sign_open(r,e,e.length,t);if(n<0)return null;for(var o=new Uint8Array(n),i=0;i<o.length;i++)o[i]=r[i];return o},e.sign.detached=function(t,r){for(var n=e.sign(t,r),o=new Uint8Array(64),i=0;i<o.length;i++)o[i]=n[i];return o},e.sign.detached.verify=function(e,t,r){if(checkArrayTypes(e,t,r),64!==t.length)throw Error("bad signature size");if(32!==r.length)throw Error("bad public key size");var n,o=new Uint8Array(64+e.length),i=new Uint8Array(64+e.length);for(n=0;n<64;n++)o[n]=t[n];for(n=0;n<e.length;n++)o[n+64]=e[n];return crypto_sign_open(i,o,o.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(64);return crypto_sign_keypair(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(checkArrayTypes(e),64!==e.length)throw Error("bad secret key size");for(var t=new Uint8Array(32),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(checkArrayTypes(e),32!==e.length)throw Error("bad seed size");for(var t=new Uint8Array(32),r=new Uint8Array(64),n=0;n<32;n++)r[n]=e[n];return crypto_sign_keypair(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=32,e.sign.secretKeyLength=64,e.sign.seedLength=32,e.sign.signatureLength=64,e.hash=function(e){checkArrayTypes(e);var t=new Uint8Array(64);return crypto_hash(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return checkArrayTypes(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===vn(e,0,t,0,e.length)},e.setPRNG=function(e){randombytes=e},(t="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&t.getRandomValues?e.setPRNG(function(e,r){var n,o=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(o.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=o[n];cleanup(o)}):(t=r(5024))&&t.randomBytes&&e.setPRNG(function(e,r){var n,o=t.randomBytes(r);for(n=0;n<r;n++)e[n]=o[n];cleanup(o)})}(e.exports?e.exports:self.nacl=self.nacl||{})},2238:function(e,t,r){var n;!function(o,i){"use strict";var s="function",a="undefined",c="object",l="string",u="major",d="model",h="name",p="type",g="vendor",f="version",w="architecture",b="console",y="mobile",v="tablet",m="smarttv",_="wearable",E="embedded",C="Amazon",T="Apple",R="ASUS",k="BlackBerry",x="Browser",O="Chrome",U="Firefox",P="Google",N="Huawei",j="Microsoft",I="Motorola",W="Opera",L="Samsung",D="Sharp",q="Sony",B="Xiaomi",K="Zebra",F="Facebook",G="Chromium OS",H="Mac OS",z=" Browser",extend=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},enumerize=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},has=function(e,t){return typeof e===l&&-1!==lowerize(t).indexOf(lowerize(e))},lowerize=function(e){return e.toLowerCase()},trim=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},rgxMapper=function(e,t){for(var r,n,o,a,l,u,d=0;d<t.length&&!l;){var h=t[d],p=t[d+1];for(r=n=0;r<h.length&&!l&&h[r];)if(l=h[r++].exec(e))for(o=0;o<p.length;o++)u=l[++n],typeof(a=p[o])===c&&a.length>0?2===a.length?typeof a[1]==s?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3===a.length?typeof a[1]!==s||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):i:this[a[0]]=u?a[1].call(this,u,a[2]):i:4===a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):i):this[a]=u||i;d+=2}},strMapper=function(e,t){for(var r in t)if(typeof t[r]===c&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(has(t[r][n],e))return"?"===r?i:r}else if(has(t[r],e))return"?"===r?i:r;return t.hasOwnProperty("*")?t["*"]:e},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},V={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[f,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[f,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,f],[/opios[\/ ]+([\w\.]+)/i],[f,[h,W+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[f,[h,W+" GX"]],[/\bopr\/([\w\.]+)/i],[f,[h,W]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[f,[h,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[f,[h,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,f],[/quark(?:pc)?\/([-\w\.]+)/i],[f,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[f,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[f,[h,"UC"+x]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[f,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[f,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[f,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[f,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[f,[h,"Smart Lenovo "+x]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+x],f],[/\bfocus\/([\w\.]+)/i],[f,[h,U+" Focus"]],[/\bopt\/([\w\.]+)/i],[f,[h,W+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[f,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[f,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[f,[h,W+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[f,[h,"MIUI"+z]],[/fxios\/([\w\.-]+)/i],[f,[h,U]],[/\bqihoobrowser\/?([\w\.]*)/i],[f,[h,"360"]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],f],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+z],f],[/samsungbrowser\/([\w\.]+)/i],[f,[h,L+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[f,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],f],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[h,f],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[h],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[f,h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,F],f],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,f],[/\bgsa\/([\w\.]+) .*safari\//i],[f,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[f,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[f,[h,O+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,O+" WebView"],f],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[f,[h,"Android "+x]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,f],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[f,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[f,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[f,strMapper,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,f],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],f],[/(wolvic|librewolf)\/([\w\.]+)/i],[h,f],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[f,[h,U+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,[f,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[f,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[w,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/windows (ce|mobile); ppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[w,/ower/,"",lowerize]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[w,lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[g,L],[p,v]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[d,[g,L],[p,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[g,T],[p,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[g,T],[p,v]],[/(macintosh);/i],[d,[g,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[g,D],[p,y]],[/(?:honor)([-\w ]+)[;\)]/i],[d,[g,"Honor"],[p,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[g,N],[p,v]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[g,N],[p,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[d,/_/g," "],[g,B],[p,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[g,B],[p,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[g,"OPPO"],[p,y]],[/\b(opd2\d{3}a?) bui/i],[d,[g,"OPPO"],[p,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[g,"Vivo"],[p,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[g,"Realme"],[p,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[g,I],[p,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[g,I],[p,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[g,"LG"],[p,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[g,"LG"],[p,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[g,"Lenovo"],[p,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[g,"Nokia"],[p,y]],[/(pixel c)\b/i],[d,[g,P],[p,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[g,P],[p,y]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[g,q],[p,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[g,q],[p,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[g,"OnePlus"],[p,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[g,C],[p,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[g,C],[p,y]],[/(playbook);[-\w\),; ]+(rim)/i],[d,g,[p,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[g,k],[p,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[g,R],[p,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[g,R],[p,y]],[/(nexus 9)/i],[d,[g,"HTC"],[p,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[g,[d,/_/g," "],[p,y]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[d,[g,"TCL"],[p,v]],[/(itel) ((\w+))/i],[[g,lowerize],d,[p,strMapper,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[g,"Acer"],[p,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[g,"Meizu"],[p,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[g,"Ulefone"],[p,y]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[d,[g,"Energizer"],[p,y]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[d,[g,"Cat"],[p,y]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[d,[g,"Smartfren"],[p,y]],[/droid.+; (a(?:015|06[35]|142p?))/i],[d,[g,"Nothing"],[p,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[g,d,[p,y]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[g,d,[p,v]],[/(surface duo)/i],[d,[g,j],[p,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[g,"Fairphone"],[p,y]],[/(u304aa)/i],[d,[g,"AT&T"],[p,y]],[/\bsie-(\w*)/i],[d,[g,"Siemens"],[p,y]],[/\b(rct\w+) b/i],[d,[g,"RCA"],[p,v]],[/\b(venue[\d ]{2,7}) b/i],[d,[g,"Dell"],[p,v]],[/\b(q(?:mv|ta)\w+) b/i],[d,[g,"Verizon"],[p,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[g,"Barnes & Noble"],[p,v]],[/\b(tm\d{3}\w+) b/i],[d,[g,"NuVision"],[p,v]],[/\b(k88) b/i],[d,[g,"ZTE"],[p,v]],[/\b(nx\d{3}j) b/i],[d,[g,"ZTE"],[p,y]],[/\b(gen\d{3}) b.+49h/i],[d,[g,"Swiss"],[p,y]],[/\b(zur\d{3}) b/i],[d,[g,"Swiss"],[p,v]],[/\b((zeki)?tb.*\b) b/i],[d,[g,"Zeki"],[p,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[g,"Dragon Touch"],d,[p,v]],[/\b(ns-?\w{0,9}) b/i],[d,[g,"Insignia"],[p,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[g,"NextBook"],[p,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[g,"Voice"],d,[p,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[g,"LvTel"],d,[p,y]],[/\b(ph-1) /i],[d,[g,"Essential"],[p,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[g,"Envizen"],[p,v]],[/\b(trio[-\w\. ]+) b/i],[d,[g,"MachSpeed"],[p,v]],[/\btu_(1491) b/i],[d,[g,"Rotor"],[p,v]],[/(shield[\w ]+) b/i],[d,[g,"Nvidia"],[p,v]],[/(sprint) (\w+)/i],[g,d,[p,y]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[g,j],[p,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[g,K],[p,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[g,K],[p,y]],[/smart-tv.+(samsung)/i],[g,[p,m]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[g,L],[p,m]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[g,"LG"],[p,m]],[/(apple) ?tv/i],[g,[d,T+" TV"],[p,m]],[/crkey/i],[[d,O+"cast"],[g,P],[p,m]],[/droid.+aft(\w+)( bui|\))/i],[d,[g,C],[p,m]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[g,D],[p,m]],[/(bravia[\w ]+)( bui|\))/i],[d,[g,q],[p,m]],[/(mitv-\w{5}) bui/i],[d,[g,B],[p,m]],[/Hbbtv.*(technisat) (.*);/i],[g,d,[p,m]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[g,trim],[d,trim],[p,m]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[g,d,[p,b]],[/droid.+; (shield) bui/i],[d,[g,"Nvidia"],[p,b]],[/(playstation [345portablevi]+)/i],[d,[g,q],[p,b]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[g,j],[p,b]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[d,[g,L],[p,_]],[/((pebble))app/i],[g,d,[p,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[g,T],[p,_]],[/droid.+; (glass) \d/i],[d,[g,P],[p,_]],[/droid.+; (wt63?0{2,3})\)/i],[d,[g,K],[p,_]],[/droid.+; (glass) \d/i],[d,[g,P],[p,_]],[/(pico) (4|neo3(?: link|pro)?)/i],[g,d,[p,_]],[/; (quest( \d| pro)?)/i],[d,[g,F],[p,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[g,[p,E]],[/(aeobc)\b/i],[d,[g,C],[p,E]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[p,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,y]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[g,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[f,[h,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[h,f],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[f,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,f],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[f,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,f],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[f,strMapper,$]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,strMapper,$],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[f,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,H],[f,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[f,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,f],[/\(bb(10);/i],[f,[h,k]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[f,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[f,[h,U+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[f,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[f,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[f,[h,O+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,G],f],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,f],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],f],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,f]]},UAParser=function(e,t){if(typeof e===c&&(t=e,e=i),!(this instanceof UAParser))return new UAParser(e,t).getResult();var r=typeof o!==a&&o.navigator?o.navigator:i,n=e||(r&&r.userAgent?r.userAgent:""),b=r&&r.userAgentData?r.userAgentData:i,m=t?extend(V,t):V,_=r&&r.userAgent==n;return this.getBrowser=function(){var e,t={};return t[h]=i,t[f]=i,rgxMapper.call(t,n,m.browser),t[u]=typeof(e=t[f])===l?e.replace(/[^\d\.]/g,"").split(".")[0]:i,_&&r&&r.brave&&typeof r.brave.isBrave==s&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[w]=i,rgxMapper.call(e,n,m.cpu),e},this.getDevice=function(){var e={};return e[g]=i,e[d]=i,e[p]=i,rgxMapper.call(e,n,m.device),_&&!e[p]&&b&&b.mobile&&(e[p]=y),_&&"Macintosh"==e[d]&&r&&typeof r.standalone!==a&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[d]="iPad",e[p]=v),e},this.getEngine=function(){var e={};return e[h]=i,e[f]=i,rgxMapper.call(e,n,m.engine),e},this.getOS=function(){var e={};return e[h]=i,e[f]=i,rgxMapper.call(e,n,m.os),_&&!e[h]&&b&&b.platform&&"Unknown"!=b.platform&&(e[h]=b.platform.replace(/chrome os/i,G).replace(/macos/i,H)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===l&&e.length>500?trim(e,500):e,this},this.setUA(n),this};UAParser.VERSION="1.0.40",UAParser.BROWSER=enumerize([h,f,u]),UAParser.CPU=enumerize([w]),UAParser.DEVICE=enumerize([d,g,p,b,y,m,v,_,E]),UAParser.ENGINE=UAParser.OS=enumerize([h,f]),typeof t!==a?(e.exports&&(t=e.exports=UAParser),t.UAParser=UAParser):r.amdO?i!==(n=(function(){return UAParser}).call(t,r,t,e))&&(e.exports=n):typeof o!==a&&(o.UAParser=UAParser);var Y=typeof o!==a&&(o.jQuery||o.Zepto);if(Y&&!Y.ua){var J=new UAParser;Y.ua=J.getResult(),Y.ua.get=function(){return J.getUA()},Y.ua.set=function(e){J.setUA(e);var t=J.getResult();for(var r in t)Y.ua[r]=t[r]}}}("object"==typeof window?window:this)},3967:function(e,t){var r;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function classNames(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=appendClass(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return classNames.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=appendClass(t,r));return t}(r)))}return e}function appendClass(e,t){return t?e?e+" "+t:e+t:e}e.exports?(classNames.default=classNames,e.exports=classNames):void 0!==(r=(function(){return classNames}).apply(t,[]))&&(e.exports=r)}()},6669:function(e,t,r){"use strict";r.d(t,{Rh:function(){return BrowserEventDispatcher},sX:function(){return g},PS:function(){return TonConnect},_Y:function(){return TonConnectError},$o:function(){return WalletMissingRequiredFeaturesError},xT:function(){return checkRequiredWalletFeatures},Yz:function(){return createConnectionCompletedEvent},D:function(){return createConnectionErrorEvent},NO:function(){return createConnectionRestoringCompletedEvent},e6:function(){return createConnectionRestoringErrorEvent},gW:function(){return createConnectionRestoringStartedEvent},DW:function(){return createConnectionStartedEvent},_6:function(){return createDisconnectionEvent},x6:function(){return createRequestVersionEvent},Ls:function(){return createResponseVersionEvent},PT:function(){return createTransactionSentForSignatureEvent},h1:function(){return createTransactionSignedEvent},Ey:function(){return createTransactionSigningFailedEvent},_H:function(){return createVersionInfo},Ob:function(){return encodeTelegramUrlParameters},dg:function(){return isTelegramUrl},eo:function(){return isWalletInfoCurrentlyEmbedded},rM:function(){return isWalletInfoCurrentlyInjected},Lh:function(){return isWalletInfoRemote},mb:function(){return toUserFriendlyAddress}});var n,o,i,s,a,c,l,u,d,h,p,g,f=r(6885),w=r(780);r(3454),(n=l||(l={}))[n.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",n[n.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",n[n.MANIFEST_NOT_FOUND_ERROR=2]="MANIFEST_NOT_FOUND_ERROR",n[n.MANIFEST_CONTENT_ERROR=3]="MANIFEST_CONTENT_ERROR",n[n.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",n[n.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",n[n.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",(o=u||(u={}))[o.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",o[o.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",(i=d||(d={}))[i.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",i[i.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",i[i.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",i[i.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",i[i.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",(s=h||(h={}))[s.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",s[s.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",s[s.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",s[s.USER_REJECTS_ERROR=300]="USER_REJECTS_ERROR",s[s.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",(a=p||(p={}))[a.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",a[a.BAD_REQUEST_ERROR=1]="BAD_REQUEST_ERROR",a[a.UNKNOWN_APP_ERROR=100]="UNKNOWN_APP_ERROR",a[a.METHOD_NOT_SUPPORTED=400]="METHOD_NOT_SUPPORTED",(c=g||(g={})).MAINNET="-239",c.TESTNET="-3";let b={encode:function(e,t=!1){let r;return e instanceof Uint8Array?r=e:("string"!=typeof e&&(e=JSON.stringify(e)),r=f.decodeUTF8(e)),function(e,t){let r=f.encodeBase64(e);return t?encodeURIComponent(r):r}(r,t)},decode:function(e,t=!1){var r;let n=(r=e,t&&(r=decodeURIComponent(r)),f.decodeBase64(r));return{toString:()=>f.encodeUTF8(n),toObject(){try{return JSON.parse(f.encodeUTF8(n))}catch(e){return null}},toUint8Array:()=>n}}};function toHexString(e){let t="";return e.forEach(e=>{t+=("0"+(255&e).toString(16)).slice(-2)}),t}function hexToByteArray(e){if(e.length%2!=0)throw Error(`Cannot convert ${e} to bytesArray`);let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=parseInt(e.slice(r,r+2),16);return t}let SessionCrypto=class SessionCrypto{constructor(e){this.nonceLength=24,this.keyPair=e?this.createKeypairFromString(e):this.createKeypair(),this.sessionId=toHexString(this.keyPair.publicKey)}createKeypair(){return w.box.keyPair()}createKeypairFromString(e){return{publicKey:hexToByteArray(e.publicKey),secretKey:hexToByteArray(e.secretKey)}}createNonce(){return w.randomBytes(this.nonceLength)}encrypt(e,t){let r=new TextEncoder().encode(e),n=this.createNonce(),o=w.box(r,n,t,this.keyPair.secretKey);return function(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(n,o)}decrypt(e,t){let[r,n]=function(e,t){if(t>=e.length)throw Error("Index is out of buffer");let r=e.slice(0,t),n=e.slice(t);return[r,n]}(e,this.nonceLength),o=w.box.open(n,r,t,this.keyPair.secretKey);if(!o)throw Error(`Decryption error: 
 message: ${e.toString()} 
 sender pubkey: ${t.toString()} 
 keypair pubkey: ${this.keyPair.publicKey.toString()} 
 keypair secretkey: ${this.keyPair.secretKey.toString()}`);return new TextDecoder().decode(o)}stringifyKeypair(){return{publicKey:toHexString(this.keyPair.publicKey),secretKey:toHexString(this.keyPair.secretKey)}}};var y=r(3454);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)0>t.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function __awaiter(e,t,r,n){return new(r||(r=Promise))(function(o,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n.throw(e))}catch(e){i(e)}}function step(e){var t;e.done?o(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})}let TonConnectError=class TonConnectError extends Error{constructor(e,t){super(e,t),this.message=`${TonConnectError.prefix} ${this.constructor.name}${this.info?": "+this.info:""}${e?"\n"+e:""}`,Object.setPrototypeOf(this,TonConnectError.prototype)}get info(){return""}};TonConnectError.prefix="[TON_CONNECT_SDK_ERROR]";let DappMetadataError=class DappMetadataError extends TonConnectError{get info(){return"Passed DappMetadata is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,DappMetadataError.prototype)}};let ManifestContentErrorError=class ManifestContentErrorError extends TonConnectError{get info(){return"Passed `tonconnect-manifest.json` contains errors. Check format of your manifest. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,ManifestContentErrorError.prototype)}};let ManifestNotFoundError=class ManifestNotFoundError extends TonConnectError{get info(){return"Manifest not found. Make sure you added `tonconnect-manifest.json` to the root of your app or passed correct manifestUrl. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest"}constructor(...e){super(...e),Object.setPrototypeOf(this,ManifestNotFoundError.prototype)}};let WalletAlreadyConnectedError=class WalletAlreadyConnectedError extends TonConnectError{get info(){return"Wallet connection called but wallet already connected. To avoid the error, disconnect the wallet before doing a new connection."}constructor(...e){super(...e),Object.setPrototypeOf(this,WalletAlreadyConnectedError.prototype)}};let WalletNotConnectedError=class WalletNotConnectedError extends TonConnectError{get info(){return"Send transaction or other protocol methods called while wallet is not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,WalletNotConnectedError.prototype)}};let WalletNotInjectedError=class WalletNotInjectedError extends TonConnectError{get info(){return"There is an attempt to connect to the injected wallet while it is not exists in the webpage."}constructor(...e){super(...e),Object.setPrototypeOf(this,WalletNotInjectedError.prototype)}};let WalletNotSupportFeatureError=class WalletNotSupportFeatureError extends TonConnectError{get info(){return"Wallet doesn't support requested feature method."}constructor(...e){super(...e),Object.setPrototypeOf(this,WalletNotSupportFeatureError.prototype)}};let WalletMissingRequiredFeaturesError=class WalletMissingRequiredFeaturesError extends TonConnectError{get info(){return"Missing required features. You need to update your wallet."}constructor(e,t){super(e,t),Object.setPrototypeOf(this,WalletMissingRequiredFeaturesError.prototype)}};let UserRejectsError=class UserRejectsError extends TonConnectError{get info(){return"User rejects the action in the wallet."}constructor(...e){super(...e),Object.setPrototypeOf(this,UserRejectsError.prototype)}};let BadRequestError=class BadRequestError extends TonConnectError{get info(){return"Request to the wallet contains errors."}constructor(...e){super(...e),Object.setPrototypeOf(this,BadRequestError.prototype)}};let UnknownAppError=class UnknownAppError extends TonConnectError{get info(){return"App tries to send rpc request to the injected wallet while not connected."}constructor(...e){super(...e),Object.setPrototypeOf(this,UnknownAppError.prototype)}};let FetchWalletsError=class FetchWalletsError extends TonConnectError{get info(){return"An error occurred while fetching the wallets list."}constructor(...e){super(...e),Object.setPrototypeOf(this,FetchWalletsError.prototype)}};let WrongAddressError=class WrongAddressError extends TonConnectError{get info(){return"Passed address is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,WrongAddressError.prototype)}};let ParseHexError=class ParseHexError extends TonConnectError{get info(){return"Passed hex is in incorrect format."}constructor(...e){super(...e),Object.setPrototypeOf(this,ParseHexError.prototype)}};let UnknownError=class UnknownError extends TonConnectError{constructor(...e){super(...e),Object.setPrototypeOf(this,UnknownError.prototype)}};let v={[l.UNKNOWN_ERROR]:UnknownError,[l.USER_REJECTS_ERROR]:UserRejectsError,[l.BAD_REQUEST_ERROR]:BadRequestError,[l.UNKNOWN_APP_ERROR]:UnknownAppError,[l.MANIFEST_NOT_FOUND_ERROR]:ManifestNotFoundError,[l.MANIFEST_CONTENT_ERROR]:ManifestContentErrorError},m=new class{parseError(e){let t=UnknownError;return e.code in v&&(t=v[e.code]||UnknownError),new t(e.message)}};let RpcParser=class RpcParser{isError(e){return"error"in e}};let _={[d.UNKNOWN_ERROR]:UnknownError,[d.USER_REJECTS_ERROR]:UserRejectsError,[d.BAD_REQUEST_ERROR]:BadRequestError,[d.UNKNOWN_APP_ERROR]:UnknownAppError},E=new class extends RpcParser{convertToRpcRequest(e){return{method:"sendTransaction",params:[JSON.stringify(e)]}}parseAndThrowError(e){let t=UnknownError;throw e.error.code in _&&(t=_[e.error.code]||UnknownError),new t(e.error.message)}convertFromRpcResponse(e){return{boc:e.result}}};let HttpBridgeGatewayStorage=class HttpBridgeGatewayStorage{constructor(e,t){this.storage=e,this.storeKey="ton-connect-storage_http-bridge-gateway::"+t}storeLastEventId(e){return __awaiter(this,void 0,void 0,function*(){return this.storage.setItem(this.storeKey,e)})}removeLastEventId(){return __awaiter(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getLastEventId(){return __awaiter(this,void 0,void 0,function*(){let e=yield this.storage.getItem(this.storeKey);return e||null})}};function addPathToUrl(e,t){return("/"===e.slice(-1)?e.slice(0,-1):e)+"/"+t}function isTelegramUrl(e){if(!e)return!1;let t=new URL(e);return"tg:"===t.protocol||"t.me"===t.hostname}function encodeTelegramUrlParameters(e){return e.replaceAll(".","%2E").replaceAll("-","%2D").replaceAll("_","%5F").replaceAll("&","-").replaceAll("=","__").replaceAll("%","--")}function delay(e,t){return __awaiter(this,void 0,void 0,function*(){return new Promise((r,n)=>{var o,i;if(null===(o=null==t?void 0:t.signal)||void 0===o?void 0:o.aborted){n(new TonConnectError("Delay aborted"));return}let s=setTimeout(()=>r(),e);null===(i=null==t?void 0:t.signal)||void 0===i||i.addEventListener("abort",()=>{clearTimeout(s),n(new TonConnectError("Delay aborted"))})})})}function createAbortController(e){let t=new AbortController;return(null==e?void 0:e.aborted)?t.abort():null==e||e.addEventListener("abort",()=>t.abort(),{once:!0}),t}function callForSuccess(e,t){var r,n;return __awaiter(this,void 0,void 0,function*(){let o;let i=null!==(r=null==t?void 0:t.attempts)&&void 0!==r?r:10,s=null!==(n=null==t?void 0:t.delayMs)&&void 0!==n?n:200,a=createAbortController(null==t?void 0:t.signal);if("function"!=typeof e)throw new TonConnectError(`Expected a function, got ${typeof e}`);let c=0;for(;c<i;){if(a.signal.aborted)throw new TonConnectError(`Aborted after attempts ${c}`);try{return yield e({signal:a.signal})}catch(e){o=e,++c<i&&(yield delay(s))}}throw o})}function logDebug(...e){try{console.debug("[TON_CONNECT_SDK]",...e)}catch(e){}}function logError(...e){try{console.error("[TON_CONNECT_SDK]",...e)}catch(e){}}let BridgeGateway=class BridgeGateway{constructor(e,t,r,n,o){this.bridgeUrl=t,this.sessionId=r,this.listener=n,this.errorsListener=o,this.ssePath="events",this.postPath="message",this.heartbeatMessage="heartbeat",this.defaultTtl=300,this.defaultReconnectDelay=2e3,this.defaultResendDelay=5e3,this.eventSource=function(e,t){let r=null,n=null,o=null,i=null,s=null,create=(a,...c)=>__awaiter(this,void 0,void 0,function*(){if(i=null!=a?a:null,null==s||s.abort(),(s=createAbortController(a)).signal.aborted)throw new TonConnectError("Resource creation was aborted");n=null!=c?c:null;let l=e(s.signal,...c);o=l;let u=yield l;if(o!==l&&u!==r)throw yield t(u),new TonConnectError("Resource creation was aborted by a new resource creation");return r=u});return{create,current:()=>null!=r?r:null,dispose:()=>__awaiter(this,void 0,void 0,function*(){try{let e=r;r=null;let n=o;o=null;try{null==s||s.abort()}catch(e){}yield Promise.allSettled([e?t(e):Promise.resolve(),n?t((yield n)):Promise.resolve()])}catch(e){}}),recreate:e=>__awaiter(this,void 0,void 0,function*(){let t=r,s=o,a=n,c=i;if(yield delay(e),t===r&&s===o&&a===n&&c===i)return yield create(i,...null!=a?a:[]);throw new TonConnectError("Resource recreation was aborted by a new resource creation")})}}((e,t)=>__awaiter(this,void 0,void 0,function*(){let r={bridgeUrl:this.bridgeUrl,ssePath:this.ssePath,sessionId:this.sessionId,bridgeGatewayStorage:this.bridgeGatewayStorage,errorHandler:this.errorsHandler.bind(this),messageHandler:this.messagesHandler.bind(this),signal:e,openingDeadlineMS:t};return yield function(e){return __awaiter(this,void 0,void 0,function*(){return yield function(e,t){let r=null==t?void 0:t.timeout,n=null==t?void 0:t.signal,o=createAbortController(n);return new Promise((t,n)=>__awaiter(this,void 0,void 0,function*(){let i;if(o.signal.aborted){n(new TonConnectError("Operation aborted"));return}void 0!==r&&(i=setTimeout(()=>{o.abort(),n(new TonConnectError(`Timeout after ${r}ms`))},r)),o.signal.addEventListener("abort",()=>{clearTimeout(i),n(new TonConnectError("Operation aborted"))},{once:!0});let s={timeout:r,abort:o.signal};yield e((...e)=>{clearTimeout(i),t(...e)},()=>{clearTimeout(i),n()},s)}))}((t,r,n)=>__awaiter(this,void 0,void 0,function*(){var o;let i=createAbortController(n.signal),s=i.signal;if(s.aborted){r(new TonConnectError("Bridge connection aborted"));return}let a=new URL(addPathToUrl(e.bridgeUrl,e.ssePath));a.searchParams.append("client_id",e.sessionId);let c=yield e.bridgeGatewayStorage.getLastEventId();if(c&&a.searchParams.append("last_event_id",c),s.aborted){r(new TonConnectError("Bridge connection aborted"));return}let l=new EventSource(a.toString());l.onerror=n=>__awaiter(this,void 0,void 0,function*(){if(s.aborted){l.close(),r(new TonConnectError("Bridge connection aborted"));return}try{let r=yield e.errorHandler(l,n);r!==l&&l.close(),r&&r!==l&&t(r)}catch(e){l.close(),r(e)}}),l.onopen=()=>{if(s.aborted){l.close(),r(new TonConnectError("Bridge connection aborted"));return}t(l)},l.onmessage=t=>{if(s.aborted){l.close(),r(new TonConnectError("Bridge connection aborted"));return}e.messageHandler(t)},null===(o=e.signal)||void 0===o||o.addEventListener("abort",()=>{l.close(),r(new TonConnectError("Bridge connection aborted"))})}),{timeout:e.openingDeadlineMS,signal:e.signal})})}(r)}),e=>__awaiter(this,void 0,void 0,function*(){e.close()})),this.bridgeGatewayStorage=new HttpBridgeGatewayStorage(e,t)}get isReady(){let e=this.eventSource.current();return(null==e?void 0:e.readyState)===EventSource.OPEN}get isClosed(){let e=this.eventSource.current();return(null==e?void 0:e.readyState)!==EventSource.OPEN}get isConnecting(){let e=this.eventSource.current();return(null==e?void 0:e.readyState)===EventSource.CONNECTING}registerSession(e){return __awaiter(this,void 0,void 0,function*(){yield this.eventSource.create(null==e?void 0:e.signal,null==e?void 0:e.openingDeadlineMS)})}send(e,t,r,n){var o;return __awaiter(this,void 0,void 0,function*(){let i={};"number"==typeof n?i.ttl=n:(i.ttl=null==n?void 0:n.ttl,i.signal=null==n?void 0:n.signal,i.attempts=null==n?void 0:n.attempts);let s=new URL(addPathToUrl(this.bridgeUrl,this.postPath));s.searchParams.append("client_id",this.sessionId),s.searchParams.append("to",t),s.searchParams.append("ttl",((null==i?void 0:i.ttl)||this.defaultTtl).toString()),s.searchParams.append("topic",r);let a=b.encode(e);yield callForSuccess(e=>__awaiter(this,void 0,void 0,function*(){let t=yield this.post(s,a,e.signal);if(!t.ok)throw new TonConnectError(`Bridge send failed, status ${t.status}`)}),{attempts:null!==(o=null==i?void 0:i.attempts)&&void 0!==o?o:Number.MAX_SAFE_INTEGER,delayMs:this.defaultResendDelay,signal:null==i?void 0:i.signal})})}pause(){this.eventSource.dispose().catch(e=>logError(`Bridge pause failed, ${e}`))}unPause(){return __awaiter(this,void 0,void 0,function*(){yield this.eventSource.recreate(0)})}close(){return __awaiter(this,void 0,void 0,function*(){yield this.eventSource.dispose().catch(e=>logError(`Bridge close failed, ${e}`))})}setListener(e){this.listener=e}setErrorsListener(e){this.errorsListener=e}post(e,t,r){return __awaiter(this,void 0,void 0,function*(){let n=yield fetch(e,{method:"post",body:t,signal:r});if(!n.ok)throw new TonConnectError(`Bridge send failed, status ${n.status}`);return n})}errorsHandler(e,t){return __awaiter(this,void 0,void 0,function*(){if(this.isConnecting)throw e.close(),new TonConnectError("Bridge error, failed to connect");if(this.isReady){try{this.errorsListener(t)}catch(e){}return}if(this.isClosed)return e.close(),logDebug(`Bridge reconnecting, ${this.defaultReconnectDelay}ms delay`),yield this.eventSource.recreate(this.defaultReconnectDelay);throw new TonConnectError("Bridge error, unknown state")})}messagesHandler(e){return __awaiter(this,void 0,void 0,function*(){let t;if(e.data!==this.heartbeatMessage&&(yield this.bridgeGatewayStorage.storeLastEventId(e.lastEventId),!this.isClosed)){try{t=JSON.parse(e.data)}catch(e){throw new TonConnectError(`Bridge message parse failed, message ${e.data}`)}this.listener(t)}})}};function isPendingConnectionHttp(e){return!("connectEvent"in e)}let BridgeConnectionStorage=class BridgeConnectionStorage{constructor(e){this.storage=e,this.storeKey="ton-connect-storage_bridge-connection"}storeConnection(e){return __awaiter(this,void 0,void 0,function*(){if("injected"===e.type)return this.storage.setItem(this.storeKey,JSON.stringify(e));if(!isPendingConnectionHttp(e)){let t={sessionKeyPair:e.session.sessionCrypto.stringifyKeypair(),walletPublicKey:e.session.walletPublicKey,bridgeUrl:e.session.bridgeUrl},r={type:"http",connectEvent:e.connectEvent,session:t,lastWalletEventId:e.lastWalletEventId,nextRpcRequestId:e.nextRpcRequestId};return this.storage.setItem(this.storeKey,JSON.stringify(r))}let t={type:"http",connectionSource:e.connectionSource,sessionCrypto:e.sessionCrypto.stringifyKeypair()};return this.storage.setItem(this.storeKey,JSON.stringify(t))})}removeConnection(){return __awaiter(this,void 0,void 0,function*(){return this.storage.removeItem(this.storeKey)})}getConnection(){return __awaiter(this,void 0,void 0,function*(){let e=yield this.storage.getItem(this.storeKey);if(!e)return null;let t=JSON.parse(e);if("injected"===t.type)return t;if("connectEvent"in t){let e=new SessionCrypto(t.session.sessionKeyPair);return{type:"http",connectEvent:t.connectEvent,lastWalletEventId:t.lastWalletEventId,nextRpcRequestId:t.nextRpcRequestId,session:{sessionCrypto:e,bridgeUrl:t.session.bridgeUrl,walletPublicKey:t.session.walletPublicKey}}}return{type:"http",sessionCrypto:new SessionCrypto(t.sessionCrypto),connectionSource:t.connectionSource}})}getHttpConnection(){return __awaiter(this,void 0,void 0,function*(){let e=yield this.getConnection();if(!e)throw new TonConnectError("Trying to read HTTP connection source while nothing is stored");if("injected"===e.type)throw new TonConnectError("Trying to read HTTP connection source while injected connection is stored");return e})}getHttpPendingConnection(){return __awaiter(this,void 0,void 0,function*(){let e=yield this.getConnection();if(!e)throw new TonConnectError("Trying to read HTTP connection source while nothing is stored");if("injected"===e.type)throw new TonConnectError("Trying to read HTTP connection source while injected connection is stored");if(!isPendingConnectionHttp(e))throw new TonConnectError("Trying to read HTTP-pending connection while http connection is stored");return e})}getInjectedConnection(){return __awaiter(this,void 0,void 0,function*(){let e=yield this.getConnection();if(!e)throw new TonConnectError("Trying to read Injected bridge connection source while nothing is stored");if((null==e?void 0:e.type)==="http")throw new TonConnectError("Trying to read Injected bridge connection source while HTTP connection is stored");return e})}storedConnectionType(){return __awaiter(this,void 0,void 0,function*(){let e=yield this.storage.getItem(this.storeKey);if(!e)return null;let t=JSON.parse(e);return t.type})}storeLastWalletEventId(e){return __awaiter(this,void 0,void 0,function*(){let t=yield this.getConnection();if(t&&"http"===t.type&&!isPendingConnectionHttp(t))return t.lastWalletEventId=e,this.storeConnection(t)})}getLastWalletEventId(){return __awaiter(this,void 0,void 0,function*(){let e=yield this.getConnection();if(e&&"lastWalletEventId"in e)return e.lastWalletEventId})}increaseNextRpcRequestId(){return __awaiter(this,void 0,void 0,function*(){let e=yield this.getConnection();if(e&&"nextRpcRequestId"in e){let t=e.nextRpcRequestId||0;return e.nextRpcRequestId=t+1,this.storeConnection(e)}})}getNextRpcRequestId(){return __awaiter(this,void 0,void 0,function*(){let e=yield this.getConnection();return e&&"nextRpcRequestId"in e&&e.nextRpcRequestId||0})}};let BridgeProvider=class BridgeProvider{constructor(e,t){this.storage=e,this.walletConnectionSource=t,this.type="http",this.standardUniversalLink="tc://",this.pendingRequests=new Map,this.session=null,this.gateway=null,this.pendingGateways=[],this.listeners=[],this.defaultOpeningDeadlineMS=12e3,this.defaultRetryTimeoutMS=2e3,this.connectionStorage=new BridgeConnectionStorage(e)}static fromStorage(e){return __awaiter(this,void 0,void 0,function*(){let t=new BridgeConnectionStorage(e),r=yield t.getHttpConnection();return isPendingConnectionHttp(r)?new BridgeProvider(e,r.connectionSource):new BridgeProvider(e,{bridgeUrl:r.session.bridgeUrl})})}connect(e,t){var r;let n=createAbortController(null==t?void 0:t.signal);null===(r=this.abortController)||void 0===r||r.abort(),this.abortController=n,this.closeGateways();let o=new SessionCrypto;this.session={sessionCrypto:o,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},this.connectionStorage.storeConnection({type:"http",connectionSource:this.walletConnectionSource,sessionCrypto:o}).then(()=>__awaiter(this,void 0,void 0,function*(){n.signal.aborted||(yield callForSuccess(e=>{var r;return this.openGateways(o,{openingDeadlineMS:null!==(r=null==t?void 0:t.openingDeadlineMS)&&void 0!==r?r:this.defaultOpeningDeadlineMS,signal:null==e?void 0:e.signal})},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:n.signal}))}));let i="universalLink"in this.walletConnectionSource&&this.walletConnectionSource.universalLink?this.walletConnectionSource.universalLink:this.standardUniversalLink;return this.generateUniversalLink(i,e)}restoreConnection(e){var t,r;return __awaiter(this,void 0,void 0,function*(){let n=createAbortController(null==e?void 0:e.signal);if(null===(t=this.abortController)||void 0===t||t.abort(),this.abortController=n,n.signal.aborted)return;this.closeGateways();let o=yield this.connectionStorage.getHttpConnection();if(!o||n.signal.aborted)return;let i=null!==(r=null==e?void 0:e.openingDeadlineMS)&&void 0!==r?r:this.defaultOpeningDeadlineMS;if(isPendingConnectionHttp(o))return this.session={sessionCrypto:o.sessionCrypto,bridgeUrl:"bridgeUrl"in this.walletConnectionSource?this.walletConnectionSource.bridgeUrl:""},yield this.openGateways(o.sessionCrypto,{openingDeadlineMS:i,signal:null==n?void 0:n.signal});if(Array.isArray(this.walletConnectionSource))throw new TonConnectError("Internal error. Connection source is array while WalletConnectionSourceHTTP was expected.");if(this.session=o.session,this.gateway&&(logDebug("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new BridgeGateway(this.storage,this.walletConnectionSource.bridgeUrl,o.session.sessionCrypto.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),!n.signal.aborted){this.listeners.forEach(e=>e(o.connectEvent));try{yield callForSuccess(e=>this.gateway.registerSession({openingDeadlineMS:i,signal:e.signal}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:n.signal})}catch(e){yield this.disconnect({signal:n.signal});return}}})}sendRequest(e,t){let r={};return"function"==typeof t?r.onRequestSent=t:(r.onRequestSent=null==t?void 0:t.onRequestSent,r.signal=null==t?void 0:t.signal,r.attempts=null==t?void 0:t.attempts),new Promise((t,n)=>__awaiter(this,void 0,void 0,function*(){var o;if(!this.gateway||!this.session||!("walletPublicKey"in this.session))throw new TonConnectError("Trying to send bridge request without session");let i=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),logDebug("Send http-bridge request:",Object.assign(Object.assign({},e),{id:i}));let s=this.session.sessionCrypto.encrypt(JSON.stringify(Object.assign(Object.assign({},e),{id:i})),hexToByteArray(this.session.walletPublicKey));try{yield this.gateway.send(s,this.session.walletPublicKey,e.method,{attempts:null==r?void 0:r.attempts,signal:null==r?void 0:r.signal}),null===(o=null==r?void 0:r.onRequestSent)||void 0===o||o.call(r),this.pendingRequests.set(i.toString(),t)}catch(e){n(e)}}))}closeConnection(){this.closeGateways(),this.listeners=[],this.session=null,this.gateway=null}disconnect(e){return __awaiter(this,void 0,void 0,function*(){return new Promise(t=>__awaiter(this,void 0,void 0,function*(){let r=!1,n=null,onRequestSent=()=>{r||(r=!0,this.removeBridgeAndSession().then(t))};try{this.closeGateways();let t=createAbortController(null==e?void 0:e.signal);n=setTimeout(()=>{t.abort()},this.defaultOpeningDeadlineMS),yield this.sendRequest({method:"disconnect",params:[]},{onRequestSent:onRequestSent,signal:t.signal,attempts:1})}catch(e){logDebug("Disconnect error:",e),r||this.removeBridgeAndSession().then(t)}finally{n&&clearTimeout(n),onRequestSent()}}))})}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(t=>t!==e)}pause(){var e;null===(e=this.gateway)||void 0===e||e.pause(),this.pendingGateways.forEach(e=>e.pause())}unPause(){return __awaiter(this,void 0,void 0,function*(){let e=this.pendingGateways.map(e=>e.unPause());this.gateway&&e.push(this.gateway.unPause()),yield Promise.all(e)})}pendingGatewaysListener(e,t,r){return __awaiter(this,void 0,void 0,function*(){if(!this.pendingGateways.includes(e)){yield e.close();return}return this.closeGateways({except:e}),this.gateway&&(logDebug("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.session.bridgeUrl=t,this.gateway=e,this.gateway.setErrorsListener(this.gatewayErrorsListener.bind(this)),this.gateway.setListener(this.gatewayListener.bind(this)),this.gatewayListener(r)})}gatewayListener(e){return __awaiter(this,void 0,void 0,function*(){let t=JSON.parse(this.session.sessionCrypto.decrypt(b.decode(e.message).toUint8Array(),hexToByteArray(e.from)));if(logDebug("Wallet message received:",t),!("event"in t)){let e=t.id.toString(),r=this.pendingRequests.get(e);if(!r){logDebug(`Response id ${e} doesn't match any request's id`);return}r(t),this.pendingRequests.delete(e);return}if(void 0!==t.id){let e=yield this.connectionStorage.getLastWalletEventId();if(void 0!==e&&t.id<=e){logError(`Received event id (=${t.id}) must be greater than stored last wallet event id (=${e}) `);return}"connect"!==t.event&&(yield this.connectionStorage.storeLastWalletEventId(t.id))}let r=this.listeners;"connect"===t.event&&(yield this.updateSession(t,e.from)),"disconnect"===t.event&&(logDebug("Removing bridge and session: received disconnect event"),yield this.removeBridgeAndSession()),r.forEach(e=>e(t))})}gatewayErrorsListener(e){return __awaiter(this,void 0,void 0,function*(){throw new TonConnectError(`Bridge error ${JSON.stringify(e)}`)})}updateSession(e,t){return __awaiter(this,void 0,void 0,function*(){this.session=Object.assign(Object.assign({},this.session),{walletPublicKey:t});let r=e.payload.items.find(e=>"ton_addr"===e.name),n=Object.assign(Object.assign({},e),{payload:Object.assign(Object.assign({},e.payload),{items:[r]})});yield this.connectionStorage.storeConnection({type:"http",session:this.session,lastWalletEventId:e.id,connectEvent:n,nextRpcRequestId:0})})}removeBridgeAndSession(){return __awaiter(this,void 0,void 0,function*(){this.closeConnection(),yield this.connectionStorage.removeConnection()})}generateUniversalLink(e,t){return isTelegramUrl(e)?this.generateTGUniversalLink(e,t):this.generateRegularUniversalLink(e,t)}generateRegularUniversalLink(e,t){let r=new URL(e);return r.searchParams.append("v","2"),r.searchParams.append("id",this.session.sessionCrypto.sessionId),r.searchParams.append("r",JSON.stringify(t)),r.toString()}generateTGUniversalLink(e,t){let r=this.generateRegularUniversalLink("about:blank",t),n=r.split("?")[1],o="tonconnect-"+encodeTelegramUrlParameters(n),i=this.convertToDirectLink(e),s=new URL(i);return s.searchParams.append("startapp",o),s.toString()}convertToDirectLink(e){let t=new URL(e);return t.searchParams.has("attach")&&(t.searchParams.delete("attach"),t.pathname+="/start"),t.toString()}openGateways(e,t){return __awaiter(this,void 0,void 0,function*(){if(!Array.isArray(this.walletConnectionSource))return this.gateway&&(logDebug("Gateway is already opened, closing previous gateway"),yield this.gateway.close()),this.gateway=new BridgeGateway(this.storage,this.walletConnectionSource.bridgeUrl,e.sessionId,this.gatewayListener.bind(this),this.gatewayErrorsListener.bind(this)),yield this.gateway.registerSession({openingDeadlineMS:null==t?void 0:t.openingDeadlineMS,signal:null==t?void 0:t.signal});this.pendingGateways.map(e=>e.close().catch()),this.pendingGateways=this.walletConnectionSource.map(t=>{let r=new BridgeGateway(this.storage,t.bridgeUrl,e.sessionId,()=>{},()=>{});return r.setListener(e=>this.pendingGatewaysListener(r,t.bridgeUrl,e)),r}),yield Promise.allSettled(this.pendingGateways.map(e=>callForSuccess(r=>{var n;return this.pendingGateways.some(t=>t===e)?e.registerSession({openingDeadlineMS:null!==(n=null==t?void 0:t.openingDeadlineMS)&&void 0!==n?n:this.defaultOpeningDeadlineMS,signal:r.signal}):e.close()},{attempts:Number.MAX_SAFE_INTEGER,delayMs:this.defaultRetryTimeoutMS,signal:null==t?void 0:t.signal})))})}closeGateways(e){var t;null===(t=this.gateway)||void 0===t||t.close(),this.pendingGateways.filter(t=>t!==(null==e?void 0:e.except)).forEach(e=>e.close()),this.pendingGateways=[]}};function hasProperties(e,t){return!!e&&"object"==typeof e&&t.every(t=>t in e)}let InMemoryStorage=class InMemoryStorage{constructor(){this.storage={}}static getInstance(){return InMemoryStorage.instance||(InMemoryStorage.instance=new InMemoryStorage),InMemoryStorage.instance}get length(){return Object.keys(this.storage).length}clear(){this.storage={}}getItem(e){var t;return null!==(t=this.storage[e])&&void 0!==t?t:null}key(e){var t;let r=Object.keys(this.storage);return e<0||e>=r.length?null:null!==(t=r[e])&&void 0!==t?t:null}removeItem(e){delete this.storage[e]}setItem(e,t){this.storage[e]=t}};function getWindow(){if("undefined"!=typeof window)return window}let InjectedProvider=class InjectedProvider{constructor(e,t){this.injectedWalletKey=t,this.type="injected",this.unsubscribeCallback=null,this.listenSubscriptions=!1,this.listeners=[];let r=InjectedProvider.window;if(!InjectedProvider.isWindowContainsWallet(r,t))throw new WalletNotInjectedError;this.connectionStorage=new BridgeConnectionStorage(e),this.injectedWallet=r[t].tonconnect}static fromStorage(e){return __awaiter(this,void 0,void 0,function*(){let t=new BridgeConnectionStorage(e),r=yield t.getInjectedConnection();return new InjectedProvider(e,r.jsBridgeKey)})}static isWalletInjected(e){return InjectedProvider.isWindowContainsWallet(this.window,e)}static isInsideWalletBrowser(e){return!!InjectedProvider.isWindowContainsWallet(this.window,e)&&this.window[e].tonconnect.isWalletBrowser}static getCurrentlyInjectedWallets(){if(!this.window)return[];let e=function(){let e=getWindow();if(!e)return[];try{return Object.keys(e)}catch(e){return[]}}(),t=e.filter(([e,t])=>(function(e){try{var t;if(!hasProperties(e,["tonconnect"])||(t=e.tonconnect,!hasProperties(t,["walletInfo"])))return!1;return hasProperties(e.tonconnect.walletInfo,["name","app_name","image","about_url","platforms"])}catch(e){return!1}})(t));return t.map(([e,t])=>({name:t.tonconnect.walletInfo.name,appName:t.tonconnect.walletInfo.app_name,aboutUrl:t.tonconnect.walletInfo.about_url,imageUrl:t.tonconnect.walletInfo.image,tondns:t.tonconnect.walletInfo.tondns,jsBridgeKey:e,injected:!0,embedded:t.tonconnect.isWalletBrowser,platforms:t.tonconnect.walletInfo.platforms,features:t.tonconnect.walletInfo.features}))}static isWindowContainsWallet(e,t){return!!e&&t in e&&"object"==typeof e[t]&&"tonconnect"in e[t]}connect(e){this._connect(2,e)}restoreConnection(){return __awaiter(this,void 0,void 0,function*(){try{logDebug("Injected Provider restoring connection...");let e=yield this.injectedWallet.restoreConnection();logDebug("Injected Provider restoring connection response",e),"connect"===e.event?(this.makeSubscriptions(),this.listeners.forEach(t=>t(e))):yield this.connectionStorage.removeConnection()}catch(e){yield this.connectionStorage.removeConnection(),console.error(e)}})}closeConnection(){this.listenSubscriptions&&this.injectedWallet.disconnect(),this.closeAllListeners()}disconnect(){return __awaiter(this,void 0,void 0,function*(){return new Promise(e=>{let onRequestSent=()=>{this.closeAllListeners(),this.connectionStorage.removeConnection().then(e)};try{this.injectedWallet.disconnect(),onRequestSent()}catch(e){logDebug(e),this.sendRequest({method:"disconnect",params:[]},onRequestSent)}})})}closeAllListeners(){var e;this.listenSubscriptions=!1,this.listeners=[],null===(e=this.unsubscribeCallback)||void 0===e||e.call(this)}listen(e){return this.listeners.push(e),()=>this.listeners=this.listeners.filter(t=>t!==e)}sendRequest(e,t){var r;return __awaiter(this,void 0,void 0,function*(){let n={};"function"==typeof t?n.onRequestSent=t:(n.onRequestSent=null==t?void 0:t.onRequestSent,n.signal=null==t?void 0:t.signal);let o=(yield this.connectionStorage.getNextRpcRequestId()).toString();yield this.connectionStorage.increaseNextRpcRequestId(),logDebug("Send injected-bridge request:",Object.assign(Object.assign({},e),{id:o}));let i=this.injectedWallet.send(Object.assign(Object.assign({},e),{id:o}));return i.then(e=>logDebug("Wallet message received:",e)),null===(r=null==n?void 0:n.onRequestSent)||void 0===r||r.call(n),i})}_connect(e,t){return __awaiter(this,void 0,void 0,function*(){try{logDebug(`Injected Provider connect request: protocolVersion: ${e}, message:`,t);let r=yield this.injectedWallet.connect(e,t);logDebug("Injected Provider connect response:",r),"connect"===r.event&&(yield this.updateSession(),this.makeSubscriptions()),this.listeners.forEach(e=>e(r))}catch(t){logDebug("Injected Provider connect error:",t);let e={event:"connect_error",payload:{code:0,message:null==t?void 0:t.toString()}};this.listeners.forEach(t=>t(e))}})}makeSubscriptions(){this.listenSubscriptions=!0,this.unsubscribeCallback=this.injectedWallet.listen(e=>{logDebug("Wallet message received:",e),this.listenSubscriptions&&this.listeners.forEach(t=>t(e)),"disconnect"===e.event&&this.disconnect()})}updateSession(){return this.connectionStorage.storeConnection({type:"injected",jsBridgeKey:this.injectedWalletKey,nextRpcRequestId:0})}};InjectedProvider.window=getWindow();let DefaultStorage=class DefaultStorage{constructor(){this.localStorage=function(){if(function(){try{return"undefined"!=typeof localStorage}catch(e){return!1}}())return localStorage;if(void 0!==y&&null!=y.versions&&null!=y.versions.node)throw new TonConnectError("`localStorage` is unavailable, but it is required for TonConnect. For more details, see https://github.com/ton-connect/sdk/tree/main/packages/sdk#init-connector");return InMemoryStorage.getInstance()}()}getItem(e){return __awaiter(this,void 0,void 0,function*(){return this.localStorage.getItem(e)})}removeItem(e){return __awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}setItem(e,t){return __awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,t)})}};function isWalletInfoCurrentlyInjected(e){return"jsBridgeKey"in e&&e.injected}function isWalletInfoCurrentlyEmbedded(e){return isWalletInfoCurrentlyInjected(e)&&e.embedded}function isWalletInfoRemote(e){return"bridgeUrl"in e}let C=[{app_name:"telegram-wallet",name:"Wallet",image:"https://wallet.tg/images/logo-288.png",about_url:"https://wallet.tg/",universal_url:"https://t.me/wallet?attach=wallet",bridge:[{type:"sse",url:"https://walletbot.me/tonconnect-bridge/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"tonkeeper",name:"Tonkeeper",image:"https://tonkeeper.com/assets/tonconnect-icon.png",tondns:"tonkeeper.ton",about_url:"https://tonkeeper.com",universal_url:"https://app.tonkeeper.com/ton-connect",deepLink:"tonkeeper-tc://",bridge:[{type:"sse",url:"https://bridge.tonapi.io/bridge"},{type:"js",key:"tonkeeper"}],platforms:["ios","android","chrome","firefox","macos"]},{app_name:"mytonwallet",name:"MyTonWallet",image:"https://static.mytonwallet.io/icon-256.png",about_url:"https://mytonwallet.io",universal_url:"https://connect.mytonwallet.org",bridge:[{type:"js",key:"mytonwallet"},{type:"sse",url:"https://tonconnectbridge.mytonwallet.org/bridge/"}],platforms:["chrome","windows","macos","linux","ios","android","firefox"]},{app_name:"tonhub",name:"Tonhub",image:"https://tonhub.com/tonconnect_logo.png",about_url:"https://tonhub.com",universal_url:"https://tonhub.com/ton-connect",bridge:[{type:"js",key:"tonhub"},{type:"sse",url:"https://connect.tonhubapi.com/tonconnect"}],platforms:["ios","android"]},{app_name:"bitgetTonWallet",name:"Bitget Wallet",image:"https://raw.githubusercontent.com/bitgetwallet/download/refs/heads/main/logo/png/bitget_wallet_logo_288_mini.png",about_url:"https://web3.bitget.com",deepLink:"bitkeep://",bridge:[{type:"js",key:"bitgetTonWallet"},{type:"sse",url:"https://ton-connect-bridge.bgwapi.io/bridge"}],platforms:["ios","android","chrome"],universal_url:"https://bkcode.vip/ton-connect"},{app_name:"okxMiniWallet",name:"OKX Mini Wallet",image:"https://static.okx.com/cdn/assets/imgs/2411/8BE1A4A434D8F58A.png",about_url:"https://www.okx.com/web3",universal_url:"https://t.me/OKX_WALLET_BOT?attach=wallet",bridge:[{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"binanceWeb3TonWallet",name:"Binance Web3 Wallet",image:"https://public.bnbstatic.com/static/binance-w3w/ton-provider/binancew3w.png",about_url:"https://www.binance.com/en/web3wallet",deepLink:"bnc://app.binance.com/cedefi/ton-connect",bridge:[{type:"js",key:"binancew3w"},{type:"sse",url:"https://wallet.binance.com/tonbridge/bridge"}],platforms:["ios","android","macos","windows","linux"],universal_url:"https://app.binance.com/cedefi/ton-connect"},{app_name:"fintopio-tg",name:"Fintopio",image:"https://fintopio.com/tonconnect-icon.png",about_url:"https://fintopio.com",universal_url:"https://t.me/fintopio?attach=wallet",bridge:[{type:"sse",url:"https://wallet-bridge.fintopio.com/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"okxTonWallet",name:"OKX Wallet",image:"https://static.okx.com/cdn/assets/imgs/247/58E63FEA47A2B7D7.png",about_url:"https://www.okx.com/web3",universal_url:"https://www.okx.com/download?appendQuery=true&deeplink=okx://web3/wallet/tonconnect",bridge:[{type:"js",key:"okxTonWallet"},{type:"sse",url:"https://www.okx.com/tonbridge/discover/rpc/bridge"}],platforms:["chrome","safari","firefox","ios","android"]},{app_name:"hot",name:"HOT",image:"https://raw.githubusercontent.com/hot-dao/media/main/logo.png",about_url:"https://hot-labs.org/",universal_url:"https://t.me/herewalletbot?attach=wallet",bridge:[{type:"sse",url:"https://sse-bridge.hot-labs.org"},{type:"js",key:"hotWallet"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"bybitTonWallet",name:"Bybit Wallet",image:"https://raw.githubusercontent.com/bybit-web3/bybit-web3.github.io/main/docs/images/bybit-logo.png",about_url:"https://www.bybit.com/web3",universal_url:"https://app.bybit.com/ton-connect",deepLink:"bybitapp://",bridge:[{type:"js",key:"bybitTonWallet"},{type:"sse",url:"https://api-node.bybit.com/spot/api/web3/bridge/ton/bridge"}],platforms:["ios","android","chrome"]},{app_name:"dewallet",name:"DeWallet",image:"https://raw.githubusercontent.com/delab-team/manifests-images/main/WalletAvatar.png",about_url:"https://delabwallet.com",universal_url:"https://t.me/dewallet?attach=wallet",bridge:[{type:"sse",url:"https://bridge.dewallet.pro/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"safepalwallet",name:"SafePal",image:"https://s.pvcliping.com/web/public_image/SafePal_x288.png",tondns:"",about_url:"https://www.safepal.com",universal_url:"https://link.safepal.io/ton-connect",deepLink:"safepal-tc://",bridge:[{type:"sse",url:"https://ton-bridge.safepal.com/tonbridge/v1/bridge"},{type:"js",key:"safepalwallet"}],platforms:["ios","android","chrome","firefox"]},{app_name:"GateWallet",name:"GateWallet",image:"https://img.gatedataimg.com/prd-ordinal-imgs/036f07bb8730716e/gateio-0925.png",about_url:"https://www.gate.io/",bridge:[{type:"js",key:"gatetonwallet"},{type:"sse",url:"https://dapp.gateio.services/tonbridge_api/bridge/v1"}],platforms:["ios","android"],universal_url:"https://gateio.go.link/gateio/web3?adj_t=1ff8khdw_1fu4ccc7"},{app_name:"openmask",name:"OpenMask",image:"https://raw.githubusercontent.com/OpenProduct/openmask-extension/main/public/openmask-logo-288.png",about_url:"https://www.openmask.app/",bridge:[{type:"js",key:"openmask"}],platforms:["chrome"]},{app_name:"BitgetWeb3",name:"BitgetWeb3",image:"https://img.bitgetimg.com/image/third/1731638059795.png",about_url:"https://www.bitget.com",universal_url:"https://t.me/BitgetOfficialBot?attach=wallet",bridge:[{type:"sse",url:"https://ton-connect-bridge.bgwapi.io/bridge"}],platforms:["ios","android","windows","macos","linux"]},{app_name:"tobi",name:"Tobi",image:"https://app.tobiwallet.app/icons/logo-288.png",about_url:"https://tobi.fun",universal_url:"https://t.me/TobiCopilotBot?attach=wallet",bridge:[{type:"sse",url:"https://ton-bridge.tobiwallet.app/bridge"}],platforms:["ios","android","macos","windows","linux"]},{app_name:"xtonwallet",name:"XTONWallet",image:"https://xtonwallet.com/assets/img/icon-256-back.png",about_url:"https://xtonwallet.com",bridge:[{type:"js",key:"xtonwallet"}],platforms:["chrome","firefox"]},{app_name:"tonwallet",name:"TON Wallet",image:"https://wallet.ton.org/assets/ui/qr-logo.png",about_url:"https://chrome.google.com/webstore/detail/ton-wallet/nphplpgoakhhjchkkhmiggakijnkhfnd",bridge:[{type:"js",key:"tonwallet"}],platforms:["chrome"]}];let WalletsListManager=class WalletsListManager{constructor(e){var t;this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null,this.walletsListSource=null!==(t=null==e?void 0:e.walletsListSource)&&void 0!==t?t:"https://raw.githubusercontent.com/ton-blockchain/wallets-list/main/wallets-v2.json",this.cacheTTLMs=null==e?void 0:e.cacheTTLMs}getWallets(){return __awaiter(this,void 0,void 0,function*(){return this.cacheTTLMs&&this.walletsListCacheCreationTimestamp&&Date.now()>this.walletsListCacheCreationTimestamp+this.cacheTTLMs&&(this.walletsListCache=null),this.walletsListCache||(this.walletsListCache=this.fetchWalletsList(),this.walletsListCache.then(()=>{this.walletsListCacheCreationTimestamp=Date.now()}).catch(()=>{this.walletsListCache=null,this.walletsListCacheCreationTimestamp=null})),this.walletsListCache})}getEmbeddedWallet(){return __awaiter(this,void 0,void 0,function*(){let e=yield this.getWallets(),t=e.filter(isWalletInfoCurrentlyEmbedded);return 1===t.length?t[0]:null})}fetchWalletsList(){return __awaiter(this,void 0,void 0,function*(){let e=[];try{let t=yield fetch(this.walletsListSource);if(e=yield t.json(),!Array.isArray(e))throw new FetchWalletsError("Wrong wallets list format, wallets list must be an array.");let r=e.filter(e=>!this.isCorrectWalletConfigDTO(e));r.length&&(logError(`Wallet(s) ${r.map(e=>(null==e?void 0:e.name)||"unknown").join(", ")} config format is wrong. They were removed from the wallets list.`),e=e.filter(e=>this.isCorrectWalletConfigDTO(e)))}catch(t){logError(t),e=C}let t=[];try{t=InjectedProvider.getCurrentlyInjectedWallets()}catch(e){logError(e)}return this.mergeWalletsLists(this.walletConfigDTOListToWalletConfigList(e),t)})}walletConfigDTOListToWalletConfigList(e){return e.map(e=>{let t={name:e.name,appName:e.app_name,imageUrl:e.image,aboutUrl:e.about_url,tondns:e.tondns,platforms:e.platforms,features:e.features};return e.bridge.forEach(r=>{if("sse"===r.type&&(t.bridgeUrl=r.url,t.universalLink=e.universal_url,t.deepLink=e.deepLink),"js"===r.type){let e=r.key;t.jsBridgeKey=e,t.injected=InjectedProvider.isWalletInjected(e),t.embedded=InjectedProvider.isInsideWalletBrowser(e)}}),t})}mergeWalletsLists(e,t){let r=new Set(e.concat(t).map(e=>e.name));return[...r.values()].map(r=>{let n=e.find(e=>e.name===r),o=t.find(e=>e.name===r);return Object.assign(Object.assign({},n&&Object.assign({},n)),o&&Object.assign({},o))})}isCorrectWalletConfigDTO(e){if(!e||"object"!=typeof e||!("name"in e)||!("image"in e)||!("about_url"in e)||!("platforms"in e)||!("app_name"in e)||!e.platforms||!Array.isArray(e.platforms)||!e.platforms.length||!("bridge"in e)||!Array.isArray(e.bridge)||!e.bridge.length)return!1;let t=e.bridge;if(t.some(e=>!e||"object"!=typeof e||!("type"in e)))return!1;let r=t.find(e=>"sse"===e.type);if(r&&(!("object"==typeof r&&"url"in r)||!r.url||!e.universal_url))return!1;let n=t.find(e=>"js"===e.type);return!n||"object"==typeof n&&"key"in n&&!!n.key}};function checkRequiredWalletFeatures(e,t){if("object"!=typeof t)return!0;let{sendTransaction:r}=t;if(r){let t=findFeature(e,"SendTransaction");if(!t||!function(e,t){let r=void 0===t.minMessages||t.minMessages<=e.maxMessages,n=!t.extraCurrencyRequired||e.extraCurrencySupported;return!!(r&&n)}(t,r))return!1}return!0}function findFeature(e,t){return e.find(e=>e&&"object"==typeof e&&e.name===t)}function createRequestVersionEvent(){return{type:"request-version"}}function createResponseVersionEvent(e){return{type:"response-version",version:e}}function createVersionInfo(e){return{ton_connect_sdk_lib:e.ton_connect_sdk_lib,ton_connect_ui_lib:e.ton_connect_ui_lib}}function createConnectionInfo(e,t){var r,n,o,i,s,a,c,l;let u=(null===(r=null==t?void 0:t.connectItems)||void 0===r?void 0:r.tonProof)&&"proof"in t.connectItems.tonProof;return{wallet_address:null!==(o=null===(n=null==t?void 0:t.account)||void 0===n?void 0:n.address)&&void 0!==o?o:null,wallet_type:null!==(i=null==t?void 0:t.device.appName)&&void 0!==i?i:null,wallet_version:null!==(s=null==t?void 0:t.device.appVersion)&&void 0!==s?s:null,auth_type:u?"ton_proof":"ton_addr",custom_data:Object.assign({chain_id:null!==(c=null===(a=null==t?void 0:t.account)||void 0===a?void 0:a.chain)&&void 0!==c?c:null,provider:null!==(l=null==t?void 0:t.provider)&&void 0!==l?l:null},createVersionInfo(e))}}function createConnectionStartedEvent(e){return{type:"connection-started",custom_data:createVersionInfo(e)}}function createConnectionCompletedEvent(e,t){return Object.assign({type:"connection-completed",is_success:!0},createConnectionInfo(e,t))}function createConnectionErrorEvent(e,t,r){return{type:"connection-error",is_success:!1,error_message:t,error_code:null!=r?r:null,custom_data:createVersionInfo(e)}}function createConnectionRestoringStartedEvent(e){return{type:"connection-restoring-started",custom_data:createVersionInfo(e)}}function createConnectionRestoringCompletedEvent(e,t){return Object.assign({type:"connection-restoring-completed",is_success:!0},createConnectionInfo(e,t))}function createConnectionRestoringErrorEvent(e,t){return{type:"connection-restoring-error",is_success:!1,error_message:t,custom_data:createVersionInfo(e)}}function createTransactionInfo(e,t){var r,n,o,i;return{valid_until:null!==(r=String(t.validUntil))&&void 0!==r?r:null,from:null!==(i=null!==(n=t.from)&&void 0!==n?n:null===(o=null==e?void 0:e.account)||void 0===o?void 0:o.address)&&void 0!==i?i:null,messages:t.messages.map(e=>{var t,r;return{address:null!==(t=e.address)&&void 0!==t?t:null,amount:null!==(r=e.amount)&&void 0!==r?r:null}})}}function createTransactionSentForSignatureEvent(e,t,r){return Object.assign(Object.assign({type:"transaction-sent-for-signature"},createConnectionInfo(e,t)),createTransactionInfo(t,r))}function createTransactionSignedEvent(e,t,r,n){return Object.assign(Object.assign({type:"transaction-signed",is_success:!0,signed_transaction:n.boc},createConnectionInfo(e,t)),createTransactionInfo(t,r))}function createTransactionSigningFailedEvent(e,t,r,n,o){return Object.assign(Object.assign({type:"transaction-signing-failed",is_success:!1,error_message:n,error_code:null!=o?o:null},createConnectionInfo(e,t)),createTransactionInfo(t,r))}function createDisconnectionEvent(e,t,r){return Object.assign({type:"disconnection",scope:r},createConnectionInfo(e,t))}let BrowserEventDispatcher=class BrowserEventDispatcher{constructor(){this.window=getWindow()}dispatchEvent(e,t){var r;return __awaiter(this,void 0,void 0,function*(){let n=new CustomEvent(e,{detail:t});null===(r=this.window)||void 0===r||r.dispatchEvent(n)})}addEventListener(e,t,r){var n;return __awaiter(this,void 0,void 0,function*(){return null===(n=this.window)||void 0===n||n.addEventListener(e,t,r),()=>{var r;return null===(r=this.window)||void 0===r?void 0:r.removeEventListener(e,t)}})}};let TonConnectTracker=class TonConnectTracker{constructor(e){var t;this.eventPrefix="ton-connect-",this.tonConnectUiVersion=null,this.eventDispatcher=null!==(t=null==e?void 0:e.eventDispatcher)&&void 0!==t?t:new BrowserEventDispatcher,this.tonConnectSdkVersion=e.tonConnectSdkVersion,this.init().catch()}get version(){return createVersionInfo({ton_connect_sdk_lib:this.tonConnectSdkVersion,ton_connect_ui_lib:this.tonConnectUiVersion})}init(){return __awaiter(this,void 0,void 0,function*(){try{yield this.setRequestVersionHandler(),this.tonConnectUiVersion=yield this.requestTonConnectUiVersion()}catch(e){}})}setRequestVersionHandler(){return __awaiter(this,void 0,void 0,function*(){yield this.eventDispatcher.addEventListener("ton-connect-request-version",()=>__awaiter(this,void 0,void 0,function*(){yield this.eventDispatcher.dispatchEvent("ton-connect-response-version",createResponseVersionEvent(this.tonConnectSdkVersion))}))})}requestTonConnectUiVersion(){return __awaiter(this,void 0,void 0,function*(){return new Promise((e,t)=>__awaiter(this,void 0,void 0,function*(){try{yield this.eventDispatcher.addEventListener("ton-connect-ui-response-version",t=>{e(t.detail.version)},{once:!0}),yield this.eventDispatcher.dispatchEvent("ton-connect-ui-request-version",createRequestVersionEvent())}catch(e){t(e)}}))})}dispatchUserActionEvent(e){try{this.eventDispatcher.dispatchEvent(`${this.eventPrefix}${e.type}`,e).catch()}catch(e){}}trackConnectionStarted(...e){try{let t=createConnectionStartedEvent(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionCompleted(...e){try{let t=createConnectionCompletedEvent(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionError(...e){try{let t=createConnectionErrorEvent(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionRestoringStarted(...e){try{let t=createConnectionRestoringStartedEvent(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionRestoringCompleted(...e){try{let t=createConnectionRestoringCompletedEvent(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackConnectionRestoringError(...e){try{let t=createConnectionRestoringErrorEvent(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackDisconnection(...e){try{let t=createDisconnectionEvent(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackTransactionSentForSignature(...e){try{let t=createTransactionSentForSignatureEvent(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackTransactionSigned(...e){try{let t=createTransactionSignedEvent(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}trackTransactionSigningFailed(...e){try{let t=createTransactionSigningFailedEvent(this.version,...e);this.dispatchUserActionEvent(t)}catch(e){}}};let TonConnect=class TonConnect{constructor(e){if(this.walletsList=new WalletsListManager,this._wallet=null,this.provider=null,this.statusChangeSubscriptions=[],this.statusChangeErrorSubscriptions=[],this.dappSettings={manifestUrl:(null==e?void 0:e.manifestUrl)||function(){var e;let t=null===(e=getWindow())||void 0===e?void 0:e.location.origin;return t?t+"/tonconnect-manifest.json":""}(),storage:(null==e?void 0:e.storage)||new DefaultStorage},this.walletsRequiredFeatures=null==e?void 0:e.walletsRequiredFeatures,this.walletsList=new WalletsListManager({walletsListSource:null==e?void 0:e.walletsListSource,cacheTTLMs:null==e?void 0:e.walletsListCacheTTLMs}),this.tracker=new TonConnectTracker({eventDispatcher:null==e?void 0:e.eventDispatcher,tonConnectSdkVersion:"3.1.0"}),!this.dappSettings.manifestUrl)throw new DappMetadataError("Dapp tonconnect-manifest.json must be specified if window.location.origin is undefined. See more https://github.com/ton-connect/docs/blob/main/requests-responses.md#app-manifest");this.bridgeConnectionStorage=new BridgeConnectionStorage(this.dappSettings.storage),(null==e?void 0:e.disableAutoPauseConnection)||this.addWindowFocusAndBlurSubscriptions()}static getWallets(){return this.walletsList.getWallets()}get connected(){return null!==this._wallet}get account(){var e;return(null===(e=this._wallet)||void 0===e?void 0:e.account)||null}get wallet(){return this._wallet}set wallet(e){this._wallet=e,this.statusChangeSubscriptions.forEach(e=>e(this._wallet))}getWallets(){return this.walletsList.getWallets()}onStatusChange(e,t){return this.statusChangeSubscriptions.push(e),t&&this.statusChangeErrorSubscriptions.push(t),()=>{this.statusChangeSubscriptions=this.statusChangeSubscriptions.filter(t=>t!==e),t&&(this.statusChangeErrorSubscriptions=this.statusChangeErrorSubscriptions.filter(e=>e!==t))}}connect(e,t){var r,n;let o={};if("object"==typeof t&&"tonProof"in t&&(o.request=t),"object"==typeof t&&("openingDeadlineMS"in t||"signal"in t||"request"in t)&&(o.request=null==t?void 0:t.request,o.openingDeadlineMS=null==t?void 0:t.openingDeadlineMS,o.signal=null==t?void 0:t.signal),this.connected)throw new WalletAlreadyConnectedError;let i=createAbortController(null==o?void 0:o.signal);if(null===(r=this.abortController)||void 0===r||r.abort(),this.abortController=i,i.signal.aborted)throw new TonConnectError("Connection was aborted");return null===(n=this.provider)||void 0===n||n.closeConnection(),this.provider=this.createProvider(e),i.signal.addEventListener("abort",()=>{var e;null===(e=this.provider)||void 0===e||e.closeConnection(),this.provider=null}),this.tracker.trackConnectionStarted(),this.provider.connect(this.createConnectRequest(null==o?void 0:o.request),{openingDeadlineMS:null==o?void 0:o.openingDeadlineMS,signal:i.signal})}restoreConnection(e){var t,r;return __awaiter(this,void 0,void 0,function*(){this.tracker.trackConnectionRestoringStarted();let n=createAbortController(null==e?void 0:e.signal);if(null===(t=this.abortController)||void 0===t||t.abort(),this.abortController=n,n.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}let[o,i]=yield Promise.all([this.bridgeConnectionStorage.storedConnectionType(),this.walletsList.getEmbeddedWallet()]);if(n.signal.aborted){this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}let s=null;try{switch(o){case"http":s=yield BridgeProvider.fromStorage(this.dappSettings.storage);break;case"injected":s=yield InjectedProvider.fromStorage(this.dappSettings.storage);break;default:if(!i)return;s=this.createProvider(i)}}catch(e){this.tracker.trackConnectionRestoringError("Provider is not restored"),yield this.bridgeConnectionStorage.removeConnection(),null==s||s.closeConnection(),s=null;return}if(n.signal.aborted){null==s||s.closeConnection(),this.tracker.trackConnectionRestoringError("Connection restoring was aborted");return}if(!s){logError("Provider is not restored"),this.tracker.trackConnectionRestoringError("Provider is not restored");return}null===(r=this.provider)||void 0===r||r.closeConnection(),this.provider=s,s.listen(this.walletEventsListener.bind(this));let onAbortRestore=()=>{this.tracker.trackConnectionRestoringError("Connection restoring was aborted"),null==s||s.closeConnection(),s=null};n.signal.addEventListener("abort",onAbortRestore);let a=callForSuccess(t=>__awaiter(this,void 0,void 0,function*(){yield null==s?void 0:s.restoreConnection({openingDeadlineMS:null==e?void 0:e.openingDeadlineMS,signal:t.signal}),n.signal.removeEventListener("abort",onAbortRestore),this.connected?this.tracker.trackConnectionRestoringCompleted(this.wallet):this.tracker.trackConnectionRestoringError("Connection restoring failed")}),{attempts:Number.MAX_SAFE_INTEGER,delayMs:2e3,signal:null==e?void 0:e.signal}),c=new Promise(e=>setTimeout(()=>e(),12e3));return Promise.race([a,c])})}sendTransaction(e,t){return __awaiter(this,void 0,void 0,function*(){let r={};"function"==typeof t?r.onRequestSent=t:(r.onRequestSent=null==t?void 0:t.onRequestSent,r.signal=null==t?void 0:t.signal);let n=createAbortController(null==r?void 0:r.signal);if(n.signal.aborted)throw new TonConnectError("Transaction sending was aborted");this.checkConnection();let o=e.messages.length,i=e.messages.some(e=>e.extraCurrency&&Object.keys(e.extraCurrency).length>0);!function(e,t){let r=e.includes("SendTransaction"),n=findFeature(e,"SendTransaction");if(!r&&!n)throw new WalletNotSupportFeatureError("Wallet doesn't support SendTransaction feature.");if(t.requireExtraCurrencies&&(!n||!n.extraCurrencySupported))throw new WalletNotSupportFeatureError("Wallet is not able to handle such SendTransaction request. Extra currencies support is required.");if(n&&void 0!==n.maxMessages){if(n.maxMessages<t.requiredMessagesNumber)throw new WalletNotSupportFeatureError(`Wallet is not able to handle such SendTransaction request. Max support messages number is ${n.maxMessages}, but ${t.requiredMessagesNumber} is required.`);return}!function(...e){try{console.warn("[TON_CONNECT_SDK]",...e)}catch(e){}}("Connected wallet didn't provide information about max allowed messages in the SendTransaction request. Request may be rejected by the wallet.")}(this.wallet.device.features,{requiredMessagesNumber:o,requireExtraCurrencies:i}),this.tracker.trackTransactionSentForSignature(this.wallet,e);let{validUntil:s,messages:a}=e,c=__rest(e,["validUntil","messages"]),l=e.from||this.account.address,u=e.network||this.account.chain,d=yield this.provider.sendRequest(E.convertToRpcRequest(Object.assign(Object.assign({},c),{from:l,network:u,valid_until:s,messages:a.map(e=>{var{extraCurrency:t}=e;return Object.assign(Object.assign({},__rest(e,["extraCurrency"])),{extra_currency:t})})})),{onRequestSent:r.onRequestSent,signal:n.signal});if(E.isError(d))return this.tracker.trackTransactionSigningFailed(this.wallet,e,d.error.message,d.error.code),E.parseAndThrowError(d);let h=E.convertFromRpcResponse(d);return this.tracker.trackTransactionSigned(this.wallet,e,h),h})}disconnect(e){var t;return __awaiter(this,void 0,void 0,function*(){if(!this.connected)throw new WalletNotConnectedError;let r=createAbortController(null==e?void 0:e.signal),n=this.abortController;if(this.abortController=r,r.signal.aborted)throw new TonConnectError("Disconnect was aborted");this.onWalletDisconnected("dapp"),yield null===(t=this.provider)||void 0===t?void 0:t.disconnect({signal:r.signal}),null==n||n.abort()})}pauseConnection(){var e;(null===(e=this.provider)||void 0===e?void 0:e.type)==="http"&&this.provider.pause()}unPauseConnection(){var e;return(null===(e=this.provider)||void 0===e?void 0:e.type)!=="http"?Promise.resolve():this.provider.unPause()}addWindowFocusAndBlurSubscriptions(){let e=function(){if("undefined"!=typeof document)return document}();if(e)try{e.addEventListener("visibilitychange",()=>{e.hidden?this.pauseConnection():this.unPauseConnection().catch()})}catch(e){logError("Cannot subscribe to the document.visibilitychange: ",e)}}createProvider(e){let t;return(t=!Array.isArray(e)&&"jsBridgeKey"in e?new InjectedProvider(this.dappSettings.storage,e.jsBridgeKey):new BridgeProvider(this.dappSettings.storage,e)).listen(this.walletEventsListener.bind(this)),t}walletEventsListener(e){switch(e.event){case"connect":this.onWalletConnected(e.payload);break;case"connect_error":this.tracker.trackConnectionError(e.payload.message,e.payload.code);let t=m.parseError(e.payload);this.onWalletConnectError(t);break;case"disconnect":this.onWalletDisconnected("wallet")}}onWalletConnected(e){var t;let r=e.items.find(e=>"ton_addr"===e.name),n=e.items.find(e=>"ton_proof"===e.name);if(!r)throw new TonConnectError("ton_addr connection item was not found");let o=checkRequiredWalletFeatures(e.device.features,this.walletsRequiredFeatures);if(!o){null===(t=this.provider)||void 0===t||t.disconnect(),this.onWalletConnectError(new WalletMissingRequiredFeaturesError("Wallet does not support required features",{cause:{connectEvent:e}}));return}let i={device:e.device,provider:this.provider.type,account:{address:r.address,chain:r.network,walletStateInit:r.walletStateInit,publicKey:r.publicKey}};n&&(i.connectItems={tonProof:n}),this.wallet=i,this.tracker.trackConnectionCompleted(i)}onWalletConnectError(e){if(this.statusChangeErrorSubscriptions.forEach(t=>t(e)),logDebug(e),e instanceof ManifestNotFoundError||e instanceof ManifestContentErrorError)throw logError(e),e}onWalletDisconnected(e){this.tracker.trackDisconnection(this.wallet,e),this.wallet=null}checkConnection(){if(!this.connected)throw new WalletNotConnectedError}createConnectRequest(e){let t=[{name:"ton_addr"}];return(null==e?void 0:e.tonProof)&&t.push({name:"ton_proof",payload:e.tonProof}),{manifestUrl:this.dappSettings.manifestUrl,items:t}}};function toUserFriendlyAddress(e,t=!1){let{wc:r,hex:n}=function(e){if(!e.includes(":"))throw new WrongAddressError(`Wrong address ${e}. Address must include ":".`);let t=e.split(":");if(2!==t.length)throw new WrongAddressError(`Wrong address ${e}. Address must include ":" only once.`);let r=parseInt(t[0]);if(0!==r&&-1!==r)throw new WrongAddressError(`Wrong address ${e}. WC must be eq 0 or -1, but ${r} received.`);let n=t[1];if((null==n?void 0:n.length)!==64)throw new WrongAddressError(`Wrong address ${e}. Hex part must be 64bytes length, but ${null==n?void 0:n.length} received.`);return{wc:r,hex:function(e){e=e.toLowerCase();let t=e.length;if(t%2!=0)throw new ParseHexError("Hex string must have length a multiple of 2: "+e);let r=t/2,n=new Uint8Array(r);for(let t=0;t<r;t++){let r=2*t,o=e.substring(r,r+2);if(!T.hasOwnProperty(o))throw new ParseHexError("Invalid hex character: "+o);n[t]=T[o]}return n}(n)}}(e),o=81;t&&(o|=128);let i=new Int8Array(34);i[0]=o,i[1]=r,i.set(n,2);let s=new Uint8Array(36);return s.set(i),s.set(function(e){let t=0,r=new Uint8Array(e.length+2);for(let n of(r.set(e),r)){let e=128;for(;e>0;)t<<=1,n&e&&(t+=1),e>>=1,t>65535&&(t&=65535,t^=4129)}return new Uint8Array([Math.floor(t/256),t%256])}(i),34),b.encode(s).replace(/\+/g,"-").replace(/\//g,"_")}TonConnect.walletsList=new WalletsListManager,TonConnect.isWalletInjected=e=>InjectedProvider.isWalletInjected(e),TonConnect.isInsideWalletBrowser=e=>InjectedProvider.isInsideWalletBrowser(e);let T={};for(let e=0;e<=255;e++){let t=e.toString(16);t.length<2&&(t="0"+t),T[t]=e}},362:function(e,t,r){"use strict";r.d(t,{dG:function(){return useTonConnectUI}});var n=r(5893),o=r(7294),i=r(1989),s=Object.defineProperty,a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))c.call(t,r)&&__defNormalProp(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__objRest=(e,t)=>{var r={};for(var n in e)c.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&a)for(var n of a(e))0>t.indexOf(n)&&l.call(e,n)&&(r[n]=e[n]);return r};function isClientSide(){return"undefined"!=typeof window}let u=(0,o.createContext)(null),d=null;(0,o.memo)(e=>{var{children:t}=e,r=__objRest(e,["children"]);return isClientSide()&&!d&&(d=new i.HF(r)),(0,n.jsx)(u.Provider,{value:d,children:t})});let TonConnectUIReactError=class TonConnectUIReactError extends i.BN{constructor(...e){super(...e),Object.setPrototypeOf(this,TonConnectUIReactError.prototype)}};let TonConnectProviderNotSetError=class TonConnectProviderNotSetError extends TonConnectUIReactError{constructor(...e){super(...e),Object.setPrototypeOf(this,TonConnectProviderNotSetError.prototype)}};function useTonConnectUI(){let e=(0,o.useContext)(u),t=(0,o.useCallback)(t=>{e&&(e.uiOptions=t)},[e]);return isClientSide()?(!function(e){if(!e)throw new TonConnectProviderNotSetError("You should add <TonConnectUIProvider> on the top of the app to use TonConnect")}(e),[e,t]):[null,()=>{}]}let h="ton-connect-button";(0,o.memo)(({className:e,style:t})=>{let[r,i]=useTonConnectUI();return(0,o.useEffect)(()=>(i({buttonRootId:h}),()=>i({buttonRootId:null})),[i]),(0,n.jsx)("div",{id:h,className:e,style:__spreadValues({width:"fit-content"},t)})})}}]);